var apps=function(t){"use strict";function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function o(t,e,o){return e&&n(t.prototype,e),o&&n(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function i(t){return function(t){if(Array.isArray(t))return a(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return a(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function s(){}function l(t,e){for(var n in e)t[n]=e[n];return t}function c(t){return t()}function u(){return Object.create(null)}function f(t){t.forEach(c)}function d(t){return"function"==typeof t}function m(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function p(t){if(null==t)return s;for(var e=arguments.length,n=new Array(e>1?e-1:0),o=1;o<e;o++)n[o-1]=arguments[o];var r=t.subscribe.apply(t,n);return r.unsubscribe?function(){return r.unsubscribe()}:r}function g(t,e,n){t.$$.on_destroy.push(p(e,n))}function h(t,e,n,o){if(t){var r=v(t,e,n,o);return t[0](r)}}function v(t,e,n,o){return t[1]&&o?l(n.ctx.slice(),t[1](o(e))):n.ctx}function $(t,e,n,o,r,i,a){var s=function(t,e,n,o){if(t[2]&&o){var r=t[2](o(n));if(void 0===e.dirty)return r;if("object"==typeof r){for(var i=[],a=Math.max(e.dirty.length,r.length),s=0;s<a;s+=1)i[s]=e.dirty[s]|r[s];return i}return e.dirty|r}return e.dirty}(e,o,r,i);if(s){var l=v(e,n,o,a);t.p(l,s)}}function y(t){var e={};for(var n in t)"$"!==n[0]&&(e[n]=t[n]);return e}function _(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e;return t.set(n),e}function w(t,e){t.appendChild(e)}function x(t,e,n){t.insertBefore(e,n||null)}function b(t){t.parentNode.removeChild(t)}function A(t,e){for(var n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function E(t){return document.createElement(t)}function T(t){return document.createTextNode(t)}function L(){return T(" ")}function M(){return T("")}function I(t,e,n,o){return t.addEventListener(e,n,o),function(){return t.removeEventListener(e,n,o)}}function S(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function F(t){return""===t?null:+t}function k(t){return Array.from(t.childNodes)}function R(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function O(t,e){t.value=null==e?"":e}function C(t,e,n,o){t.style.setProperty(e,n,o?"important":"")}var N,D;function z(){if(void 0===N){N=!1;try{"undefined"!=typeof window&&window.parent&&window.parent.document}catch(t){N=!0}}return N}function P(t){D=t}function H(){if(!D)throw new Error("Function called outside component initialization");return D}function B(t){H().$$.on_mount.push(t)}function U(t){H().$$.on_destroy.push(t)}function G(){var t=H();return function(e,n){var o=t.$$.callbacks[e];if(o){var r=function(t,e){var n=document.createEvent("CustomEvent");return n.initCustomEvent(t,!1,!1,e),n}(e,n);o.slice().forEach((function(e){e.call(t,r)}))}}}function j(t,e){H().$$.context.set(t,e)}function q(t){return H().$$.context.get(t)}var Y=[],W=[],X=[],V=[],J=Promise.resolve(),K=!1;function Q(){K||(K=!0,J.then(ot))}function Z(t){X.push(t)}function tt(t){V.push(t)}var et=!1,nt=new Set;function ot(){if(!et){et=!0;do{for(var t=0;t<Y.length;t+=1){var e=Y[t];P(e),rt(e.$$)}for(P(null),Y.length=0;W.length;)W.pop()();for(var n=0;n<X.length;n+=1){var o=X[n];nt.has(o)||(nt.add(o),o())}X.length=0}while(Y.length);for(;V.length;)V.pop()();K=!1,et=!1,nt.clear()}}function rt(t){if(null!==t.fragment){t.update(),f(t.before_update);var e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Z)}}var it,at=new Set;function st(){it={r:0,c:[],p:it}}function lt(){it.r||f(it.c),it=it.p}function ct(t,e){t&&t.i&&(at.delete(t),t.i(e))}function ut(t,e,n,o){if(t&&t.o){if(at.has(t))return;at.add(t),it.c.push((function(){at.delete(t),o&&(n&&t.d(1),o())})),t.o(e)}}var ft="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;function dt(t,e,n){var o=t.$$.props[e];void 0!==o&&(t.$$.bound[o]=n,n(t.$$.ctx[o]))}function mt(t){t&&t.c()}function pt(t,e,n){var o=t.$$,r=o.fragment,a=o.on_mount,s=o.on_destroy,l=o.after_update;r&&r.m(e,n),Z((function(){var e=a.map(c).filter(d);s?s.push.apply(s,i(e)):f(e),t.$$.on_mount=[]})),l.forEach(Z)}function gt(t,e){var n=t.$$;null!==n.fragment&&(f(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function ht(t,e){-1===t.$$.dirty[0]&&(Y.push(t),Q(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function vt(t,e,n,o,r,i){var a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:[-1],l=D;P(t);var c=e.props||{},d=t.$$={fragment:null,ctx:null,props:i,update:s,not_equal:r,bound:u(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(l?l.$$.context:[]),callbacks:u(),dirty:a,skip_bound:!1},m=!1;if(d.ctx=n?n(t,c,(function(e,n){var o=!(arguments.length<=2)&&arguments.length-2?arguments.length<=2?void 0:arguments[2]:n;return d.ctx&&r(d.ctx[e],d.ctx[e]=o)&&(!d.skip_bound&&d.bound[e]&&d.bound[e](o),m&&ht(t,e)),n})):[],d.update(),m=!0,f(d.before_update),d.fragment=!!o&&o(d.ctx),e.target){if(e.hydrate){var p=k(e.target);d.fragment&&d.fragment.l(p),p.forEach(b)}else d.fragment&&d.fragment.c();e.intro&&ct(t.$$.fragment),pt(t,e.target,e.anchor),ot()}P(l)}var $t=function(){function t(){e(this,t)}return o(t,[{key:"$destroy",value:function(){gt(this,1),this.$destroy=s}},{key:"$on",value:function(t,e){var n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),function(){var t=n.indexOf(e);-1!==t&&n.splice(t,1)}}},{key:"$set",value:function(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}]),t}();function yt(t){let e,n,o,r,i,a;return{c(){e=E("div"),n=E("h3"),o=L(),r=E("canvas"),S(r,"width",i=32),S(r,"height",a=32),S(r,"class","svelte-90w389"),S(e,"id","view"),S(e,"class","svelte-90w389")},m(i,a){x(i,e,a),w(e,n),n.innerHTML=t[0],w(e,o),w(e,r),t[2](r)},p(t,[e]){1&e&&(n.innerHTML=t[0])},i:s,o:s,d(n){n&&b(e),t[2](null)}}}function _t(t,e,n){let o,{greeting:r}=e;return B(()=>{const t=o.getContext("2d");let e;return t.fillStyle="#00f",t.fillRect(0,0,o.width,o.height),t.fillStyle="#fff",t.font="20px Arial",t.fillText("2d Canvas works, too",10,100),function n(){e=requestAnimationFrame(n);const r=t.getImageData(0,0,o.width,o.height);for(let t=0;t<r.data.length;t+=4){const e=t/4,n=e%o.width,i=e/o.height>>>0,a=window.performance.now(),s=64+128*n/o.width+64*Math.sin(a/1e3),l=64+128*i/o.height+64*Math.cos(a/1e3),c=128;r.data[t+0]=s,r.data[t+1]=l,r.data[t+2]=c,r.data[t+3]=255}t.putImageData(r,0,0)}(),()=>{cancelAnimationFrame(e)}}),t.$$set=t=>{"greeting"in t&&n(0,r=t.greeting)},[r,o,function(t){W[t?"unshift":"push"](()=>{o=t,n(1,o)})}]}var wt=[];function xt(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s,o=[];function r(n){if(m(t,n)&&(t=n,e)){for(var r=!wt.length,i=0;i<o.length;i+=1){var a=o[i];a[1](),wt.push(a,t)}if(r){for(var s=0;s<wt.length;s+=2)wt[s][0](wt[s+1]);wt.length=0}}}function i(e){r(e(t))}function a(i){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s,l=[i,a];return o.push(l),1===o.length&&(e=n(r)||s),i(t),function(){var t=o.indexOf(l);-1!==t&&o.splice(t,1),0===o.length&&(e(),e=null)}}return{set:r,update:i,subscribe:a}}var bt={},At={},Et={};function Tt(){return q(bt)}function Lt(){return q(Et)}function Mt(t,e){var n=t.indexOf(e);~n&&function(t,e){t[e]=t[t.length-1],t.pop()}(t,n)}function It(t){return"number"==typeof t?new Float32Array([((16711680&t)>>16)/255,((65280&t)>>8)/255,(255&t)/255]):t}function St(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,n=0,o=0;o<e.length;o+=1)n+=e[o]*e[o];var r=Math.sqrt(n);return t[0]=e[0]/r,t[1]=e[1]/r,t[2]=e[2]/r,t}function Ft(t){var e=new Map;return function(){for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];var i=JSON.stringify(o);return e.has(i)||e.set(i,t.apply(void 0,o)),e.get(i)}}var kt="undefined"!=typeof Float32Array?Float32Array:Array;function Rt(){var t=new kt(16);return kt!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function Ot(t,e){var n=e[0],o=e[1],r=e[2],i=e[3],a=e[4],s=e[5],l=e[6],c=e[7],u=e[8],f=e[9],d=e[10],m=e[11],p=e[12],g=e[13],h=e[14],v=e[15],$=n*s-o*a,y=n*l-r*a,_=n*c-i*a,w=o*l-r*s,x=o*c-i*s,b=r*c-i*l,A=u*g-f*p,E=u*h-d*p,T=u*v-m*p,L=f*h-d*g,M=f*v-m*g,I=d*v-m*h,S=$*I-y*M+_*L+w*T-x*E+b*A;return S?(S=1/S,t[0]=(s*I-l*M+c*L)*S,t[1]=(r*M-o*I-i*L)*S,t[2]=(g*b-h*x+v*w)*S,t[3]=(d*x-f*b-m*w)*S,t[4]=(l*T-a*I-c*E)*S,t[5]=(n*I-r*T+i*E)*S,t[6]=(h*_-p*b-v*y)*S,t[7]=(u*b-d*_+m*y)*S,t[8]=(a*M-s*T+c*A)*S,t[9]=(o*T-n*M-i*A)*S,t[10]=(p*x-g*_+v*$)*S,t[11]=(f*_-u*x-m*$)*S,t[12]=(s*E-a*L-l*A)*S,t[13]=(n*L-o*E+r*A)*S,t[14]=(g*y-p*w-h*$)*S,t[15]=(u*w-f*y+d*$)*S,t):null}function Ct(t,e,n){var o=e[0],r=e[1],i=e[2],a=e[3],s=e[4],l=e[5],c=e[6],u=e[7],f=e[8],d=e[9],m=e[10],p=e[11],g=e[12],h=e[13],v=e[14],$=e[15],y=n[0],_=n[1],w=n[2],x=n[3];return t[0]=y*o+_*s+w*f+x*g,t[1]=y*r+_*l+w*d+x*h,t[2]=y*i+_*c+w*m+x*v,t[3]=y*a+_*u+w*p+x*$,y=n[4],_=n[5],w=n[6],x=n[7],t[4]=y*o+_*s+w*f+x*g,t[5]=y*r+_*l+w*d+x*h,t[6]=y*i+_*c+w*m+x*v,t[7]=y*a+_*u+w*p+x*$,y=n[8],_=n[9],w=n[10],x=n[11],t[8]=y*o+_*s+w*f+x*g,t[9]=y*r+_*l+w*d+x*h,t[10]=y*i+_*c+w*m+x*v,t[11]=y*a+_*u+w*p+x*$,y=n[12],_=n[13],w=n[14],x=n[15],t[12]=y*o+_*s+w*f+x*g,t[13]=y*r+_*l+w*d+x*h,t[14]=y*i+_*c+w*m+x*v,t[15]=y*a+_*u+w*p+x*$,t}function Nt(t,e,n){var o,r,i,a,s,l,c,u,f,d,m,p,g=n[0],h=n[1],v=n[2];return e===t?(t[12]=e[0]*g+e[4]*h+e[8]*v+e[12],t[13]=e[1]*g+e[5]*h+e[9]*v+e[13],t[14]=e[2]*g+e[6]*h+e[10]*v+e[14],t[15]=e[3]*g+e[7]*h+e[11]*v+e[15]):(o=e[0],r=e[1],i=e[2],a=e[3],s=e[4],l=e[5],c=e[6],u=e[7],f=e[8],d=e[9],m=e[10],p=e[11],t[0]=o,t[1]=r,t[2]=i,t[3]=a,t[4]=s,t[5]=l,t[6]=c,t[7]=u,t[8]=f,t[9]=d,t[10]=m,t[11]=p,t[12]=o*g+s*h+f*v+e[12],t[13]=r*g+l*h+d*v+e[13],t[14]=i*g+c*h+m*v+e[14],t[15]=a*g+u*h+p*v+e[15]),t}function Dt(t,e,n,o){var r=e[0],i=e[1],a=e[2],s=e[3],l=r+r,c=i+i,u=a+a,f=r*l,d=r*c,m=r*u,p=i*c,g=i*u,h=a*u,v=s*l,$=s*c,y=s*u,_=o[0],w=o[1],x=o[2];return t[0]=(1-(p+h))*_,t[1]=(d+y)*_,t[2]=(m-$)*_,t[3]=0,t[4]=(d-y)*w,t[5]=(1-(f+h))*w,t[6]=(g+v)*w,t[7]=0,t[8]=(m+$)*x,t[9]=(g-v)*x,t[10]=(1-(f+p))*x,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function zt(t,e,n,o){var r=e[0],i=e[1],a=e[2],s=o[0],l=o[1],c=o[2],u=r-n[0],f=i-n[1],d=a-n[2],m=u*u+f*f+d*d;m>0&&(u*=m=1/Math.sqrt(m),f*=m,d*=m);var p=l*d-c*f,g=c*u-s*d,h=s*f-l*u;return(m=p*p+g*g+h*h)>0&&(p*=m=1/Math.sqrt(m),g*=m,h*=m),t[0]=p,t[1]=g,t[2]=h,t[3]=0,t[4]=f*h-d*g,t[5]=d*p-u*h,t[6]=u*g-f*p,t[7]=0,t[8]=u,t[9]=f,t[10]=d,t[11]=0,t[12]=r,t[13]=i,t[14]=a,t[15]=1,t}function Pt(){var t=new kt(3);return kt!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function Ht(t,e,n){var o=new kt(3);return o[0]=t,o[1]=e,o[2]=n,o}function Bt(t,e){var n=e[0],o=e[1],r=e[2],i=n*n+o*o+r*r;return i>0&&(i=1/Math.sqrt(i)),t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t}function Ut(t,e,n){var o=e[0],r=e[1],i=e[2],a=n[0],s=n[1],l=n[2];return t[0]=r*l-i*s,t[1]=i*a-o*l,t[2]=o*s-r*a,t}function Gt(t,e,n){var o=e[0],r=e[1],i=e[2],a=n[3]*o+n[7]*r+n[11]*i+n[15];return a=a||1,t[0]=(n[0]*o+n[4]*r+n[8]*i+n[12])/a,t[1]=(n[1]*o+n[5]*r+n[9]*i+n[13])/a,t[2]=(n[2]*o+n[6]*r+n[10]*i+n[14])/a,t}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});var jt,qt=function(t){var e=t[0],n=t[1],o=t[2];return Math.hypot(e,n,o)};jt=Pt();const Yt=t=>({width:8&t[0],height:16&t[0]}),Wt=t=>({width:t[3],height:t[4]});function Xt(t){let e;const n=t[13].default,o=h(n,t,t[12],Wt);return{c(){o&&o.c()},m(t,n){o&&o.m(t,n),e=!0},p(t,e){o&&o.p&&4120&e[0]&&$(o,n,t,t[12],e,Yt,Wt)},i(t){e||(ct(o,t),e=!0)},o(t){ut(o,t),e=!1},d(t){o&&o.d(t)}}}function Vt(t){let e,n,o,r,i,a=t[0]&&Xt(t);return{c(){e=E("div"),n=E("canvas"),o=L(),a&&a.c(),S(n,"class","svelte-g8n70o"),S(e,"class","container svelte-g8n70o"),Z(()=>t[15].call(e))},m(s,l){x(s,e,l),w(e,n),t[14](n),w(e,o),a&&a.m(e,null),r=function(t,e){var n=getComputedStyle(t),o=(parseInt(n.zIndex)||0)-1;"static"===n.position&&(t.style.position="relative");var r=E("iframe");r.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; "+"overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: ".concat(o,";")),r.setAttribute("aria-hidden","true"),r.tabIndex=-1;var i,a=z();return a?(r.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",i=I(window,"message",(function(t){t.source===r.contentWindow&&e()}))):(r.src="about:blank",r.onload=function(){i=I(r.contentWindow,"resize",e)}),w(t,r),function(){(a||i&&r.contentWindow)&&i(),b(r)}}(e,t[15].bind(e)),i=!0},p(t,n){t[0]?a?(a.p(t,n),1&n[0]&&ct(a,1)):(a=Xt(t),a.c(),ct(a,1),a.m(e,null)):a&&(st(),ut(a,1,1,()=>{a=null}),lt())},i(t){i||(ct(a),i=!0)},o(t){ut(a),i=!1},d(n){n&&b(e),t[14](null),a&&a.d(),r()}}}function Jt(t){return{subscribe:xt(!1,e=>{if("undefined"!=typeof IntersectionObserver){const n=new IntersectionObserver(n=>{e(function(t){const e=t.getBoundingClientRect();return e.bottom>0&&e.right>0&&e.top<window.innerHeight&&e.left<window.innerWidth}(t))});return n.observe(t),()=>n.unobserve(t)}if("undefined"!=typeof window){function n(){const{top:n,bottom:o}=t.getBoundingClientRect();e(o>0&&n<window.innerHeight)}return window.addEventListener("scroll",n),window.addEventListener("resize",n),()=>{window.removeEventListener("scroll",n),window.removeEventListener("resize",n)}}}).subscribe}}function Kt(t,e,n){let o,r,i,a=s,c=()=>(a(),a=p(x,t=>n(24,i=t)),x);t.$$.on_destroy.push(()=>a());let{$$slots:u={},$$scope:f}=e,{background:d=[1,1,1]}=e,{backgroundOpacity:m=1}=e,{fog:h}=e,{pixelRatio:v}=e;const $="fog"in e;let w,x=xt(!1);c();let b=!1,A=!1,{gl:E}=e,{process_extra_shader_components:T}=e,L=()=>{},M={camera_matrix:xt(),view:xt(),projection:xt()};const I="undefined"!=typeof window?()=>{A||(A=!0,requestAnimationFrame(L))}:()=>{},S=xt(1);g(t,S,t=>n(3,o=t));const F=xt(1);g(t,F,t=>n(4,r=t));const k=function t(e,n){var o=0,r=[],i=[],a=[],s={index:0,meshes:r,transparent_meshes:i,child_layers:a,needs_sort:!1,needs_transparency_sort:!0,add_mesh:function(t,e){e&&Mt(t.transparent?r:i,t),t.transparent?(i.push(t),s.needs_transparency_sort=!0):r.push(t),U((function(){Mt(r,t),Mt(i,t),n()}))},add_child:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o++,r=t(e,n);return a.push(r),s.needs_sort=!0,U((function(){Mt(a,r),s.needs_sort=!0,n()})),r}};return s}(0,I),R={};let O=R;const C={ambient:[],directional:[],point:[]};function N(t){return e=>{t.push(e),I(),U(()=>{const n=t.indexOf(e);~n&&t.splice(n,1),I()})}}const D=new Map;let z=!0;const P={defines:[`#define NUM_LIGHTS 2\n#define USE_FOG ${$}\n`].join(""),add_camera:t=>{if(O&&O!==R)throw new Error("A scene can only have one camera");O=t,I(),M.camera_matrix.set(O.matrix),M.projection.set(O.projection),M.view.set(O.view),U(()=>{O=R,I()})},update_camera:t=>{M.camera_matrix.set(t.matrix),M.view.set(t.view),M.projection.set(t.projection),z=!0,I()},add_directional_light:N(C.directional),add_point_light:N(C.point),add_ambient_light:N(C.ambient),get_target:t=>(D.has(t)||D.set(t,xt(null)),D.get(t)),invalidate:I,...M,width:S,height:F};j(bt,P),j(At,k);const H=((G=Rt())[0]=1,G[1]=0,G[2]=0,G[3]=0,G[4]=0,G[5]=1,G[6]=0,G[7]=0,G[8]=0,G[9]=0,G[10]=1,G[11]=0,G[12]=0,G[13]=0,G[14]=0,G[15]=1,G);var G;const q=xt(H);j(Et,{get_matrix_world:()=>H,ctm:{subscribe:q.subscribe}}),B(()=>{n(21,P.canvas=w,P),n(0,E=n(21,P.gl=w.getContext("webgl2"),P)),c(n(2,x=Jt(w))),E.clearColor(0,0,0,0),L=t=>{if(!O)return;if(X){const t=v||window.devicePixelRatio||1;n(1,w.width=o*t,w),n(1,w.height=r*t,w),E.viewport(0,0,o*t,r*t),X=!1}if(A=!1,!i&&!t)return void n(16,b=!0);n(16,b=!1),E.blendFunc(E.SRC_ALPHA,E.ONE_MINUS_SRC_ALPHA),E.enable(E.BLEND),E.enable(E.CULL_FACE),E.enable(E.DEPTH_TEST),E.depthFunc(E.LEQUAL),E.clear(E.COLOR_BUFFER_BIT|E.DEPTH_BUFFER_BIT);const e=C.ambient.reduce((t,{color:e,intensity:n})=>[Math.min(t[0]+e[0]*n,1),Math.min(t[1]+e[1]*n,1),Math.min(t[2]+e[2]*n,1)],new Float32Array([0,0,0]));let a,s={[E.DEPTH_TEST]:null,[E.CULL_FACE]:null};const l=(t,e)=>{s[t]!==e&&(e?E.enable(t):E.disable(t),s[t]=e)};function c({model:t,model_inverse_transpose:n,geometry:o,material:r,depthTest:i,doubleSided:s}){if(r){if(l(E.DEPTH_TEST,!1!==i),l(E.CULL_FACE,!0!==s),E.blendFuncSeparate(E.SRC_ALPHA,E.ONE_MINUS_SRC_ALPHA,E.SRC_ALPHA,E.ONE),o.set_attributes(E),r.program!==a){if(a=r.program,E.useProgram(r.program),E.uniform3fv(r.uniform_locations.AMBIENT_LIGHT,e),$&&(E.uniform3fv(r.uniform_locations.FOG_COLOR,V),E.uniform1f(r.uniform_locations.FOG_DENSITY,h)),r.uniform_locations.DIRECTIONAL_LIGHTS)for(let t=0;t<8;t+=1){const e=C.directional[t];if(!e)break;E.uniform3fv(r.uniform_locations.DIRECTIONAL_LIGHTS[t].direction,e.direction),E.uniform3fv(r.uniform_locations.DIRECTIONAL_LIGHTS[t].color,e.color),E.uniform1f(r.uniform_locations.DIRECTIONAL_LIGHTS[t].intensity,e.intensity)}if(r.uniform_locations.POINT_LIGHTS)for(let t=0;t<8;t+=1){const e=C.point[t];if(!e)break;E.uniform3fv(r.uniform_locations.POINT_LIGHTS[t].location,e.location),E.uniform3fv(r.uniform_locations.POINT_LIGHTS[t].color,e.color),E.uniform1f(r.uniform_locations.POINT_LIGHTS[t].intensity,e.intensity)}E.uniform3fv(r.uniform_locations.CAMERA_WORLD_POSITION,O.world_position),E.uniformMatrix4fv(r.uniform_locations.VIEW,!1,O.view),E.uniformMatrix4fv(r.uniform_locations.PROJECTION,!1,O.projection)}if(E.uniformMatrix4fv(r.uniform_locations.MODEL,!1,t),E.uniformMatrix4fv(r.uniform_locations.MODEL_INVERSE_TRANSPOSE,!1,n),"function"==typeof T?r.apply_uniforms(E,null,t,T):r.apply_uniforms(E),o.index)E.bindBuffer(E.ELEMENT_ARRAY_BUFFER,o.buffers.__index),E.drawElements(E[o.primitive],o.index.length,E.UNSIGNED_INT,0);else{const t=E[o.primitive];E.drawArrays(t,0,o.count)}}}!function t(e){e.needs_sort&&(e.child_layers.sort((t,e)=>t.index-e.index),e.needs_sort=!1),E.depthMask(!0),E.clearDepth(1),E.clear(E.DEPTH_BUFFER_BIT);for(let t=0;t<e.meshes.length;t+=1)c(e.meshes[t]);E.depthMask(!1),(z||e.needs_transparency_sort)&&(Y(e.transparent_meshes),e.needs_transparency_sort=!1);for(let t=0;t<e.transparent_meshes.length;t+=1)c(e.transparent_meshes[t]);for(let n=0;n<e.child_layers.length;n+=1)t(e.child_layers[n])}(k),z=!1};const t=setTimeout(()=>{_(S,o=w.clientWidth,o),_(F,r=w.clientHeight,r)});return(Q(),J).then(()=>L(!0)),()=>{E.getExtension("WEBGL_lose_context").loseContext(),clearTimeout(t)}});const Y=t=>{if(t.length<2)return;const e=new Map,n=new Float32Array(16);t.forEach(t=>{const o=Ct(n,O.view,t.model)[14];e.set(t,o)}),t.sort((t,n)=>e.get(t)-e.get(n))};let X=!0;let V;return t.$$set=t=>{n(40,e=l(l({},e),y(t))),"background"in t&&n(7,d=t.background),"backgroundOpacity"in t&&n(8,m=t.backgroundOpacity),"fog"in t&&n(9,h=t.fog),"pixelRatio"in t&&n(10,v=t.pixelRatio),"gl"in t&&n(0,E=t.gl),"process_extra_shader_components"in t&&n(11,T=t.process_extra_shader_components),"$$scope"in t&&n(12,f=t.$$scope)},t.$$.update=()=>{128&t.$$.dirty[0]&&(V=It(d)),24&t.$$.dirty[0]&&(X=!0,I()),2098048&t.$$.dirty[0]&&P.invalidate(),18939904&t.$$.dirty[0]&&i&&b&&P.invalidate()},e=y(e),[E,w,x,o,r,S,F,d,m,h,v,T,f,u,function(t){W[t?"unshift":"push"](()=>{w=t,n(1,w)})},function(){o=this.clientWidth,S.set(o),r=this.clientHeight,F.set(r)}]}class Qt extends $t{constructor(t){var e;super(),document.getElementById("svelte-g8n70o-style")||((e=E("style")).id="svelte-g8n70o-style",e.textContent=".container.svelte-g8n70o,canvas.svelte-g8n70o{position:relative;width:100%;height:100%;display:block;overflow:hidden}",w(document.head,e)),vt(this,t,Kt,Vt,m,{background:7,backgroundOpacity:8,fog:9,pixelRatio:10,gl:0,process_extra_shader_components:11},[-1,-1])}}!function(){var t,e=(t=new kt(4),kt!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t)}();function Zt(){var t=new kt(4);return kt!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function te(t,e,n,o){var r,i,a,s,l,c=e[0],u=e[1],f=e[2],d=e[3],m=n[0],p=n[1],g=n[2],h=n[3];return(i=c*m+u*p+f*g+d*h)<0&&(i=-i,m=-m,p=-p,g=-g,h=-h),1-i>1e-6?(r=Math.acos(i),a=Math.sin(r),s=Math.sin((1-o)*r)/a,l=Math.sin(o*r)/a):(s=1-o,l=o),t[0]=s*c+l*m,t[1]=s*u+l*p,t[2]=s*f+l*g,t[3]=s*d+l*h,t}function ee(t,e,n,o){var r=.5*Math.PI/180;e*=r,n*=r,o*=r;var i=Math.sin(e),a=Math.cos(e),s=Math.sin(n),l=Math.cos(n),c=Math.sin(o),u=Math.cos(o);return t[0]=i*l*u-a*s*c,t[1]=a*s*u+i*l*c,t[2]=a*l*c-i*s*u,t[3]=a*l*u+i*s*c,t}var ne,oe,re,ie,ae,se,le,ce=function(t,e){var n=e[0],o=e[1],r=e[2],i=e[3],a=n*n+o*o+r*r+i*i;return a>0&&(a=1/Math.sqrt(a)),t[0]=n*a,t[1]=o*a,t[2]=r*a,t[3]=i*a,t};ne=Pt(),oe=Ht(1,0,0),re=Ht(0,1,0),ie=Zt(),ae=Zt(),se=new kt(9),kt!=Float32Array&&(se[1]=0,se[2]=0,se[3]=0,se[5]=0,se[6]=0,se[7]=0),se[0]=1,se[4]=1,se[8]=1,le=se;function ue(t){let e;const n=t[9].default,o=h(n,t,t[8],null);return{c(){o&&o.c()},m(t,n){o&&o.m(t,n),e=!0},p(t,[e]){o&&o.p&&256&e&&$(o,n,t,t[8],e,null,null)},i(t){e||(ct(o,t),e=!0)},o(t){ut(o,t),e=!1},d(t){o&&o.d(t)}}}function fe(t,e,n){let o,r,i,a=s;t.$$.on_destroy.push(()=>a());let{$$slots:l={},$$scope:c}=e,{location:u=[0,0,0]}=e,{lookAt:f}=e,{up:d=[0,1,0]}=e,{rotation:m=[0,0,0]}=e,{scale:h=1}=e;const v=Tt(),$=Lt(),{ctm:y}=$;g(t,y,t=>n(14,r=t));const w=xt(null);g(t,w,t=>n(15,i=t));let x=Rt(),b=Zt();const A=new Float32Array(x.buffer,48,3);let E,T;return function(t){j(Et,t)}({ctm:w}),t.$$set=t=>{"location"in t&&n(3,u=t.location),"lookAt"in t&&n(4,f=t.lookAt),"up"in t&&n(5,d=t.up),"rotation"in t&&n(6,m=t.rotation),"scale"in t&&n(7,h=t.scale),"$$scope"in t&&n(8,c=t.$$scope)},t.$$.update=()=>{128&t.$$.dirty&&n(12,E="number"==typeof h?[h,h,h]:h),16&t.$$.dirty&&(n(0,T=f?v.get_target(f):xt(null)),a(),a=p(T,t=>n(13,o=t))),64616&t.$$.dirty&&(o?(Nt(x,r,u),zt(x,A,o,d),function(t,e,n){var o=n[0],r=n[1],i=n[2];t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o,t[3]=e[3]*o,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*i,t[9]=e[9]*i,t[10]=e[10]*i,t[11]=e[11]*i,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]}(x,x,E),_(w,i=x,i)):(n(11,b=ee(b||Zt(),...m)),n(10,x=Dt(x,b,u,E)),_(w,i=Ct(i||Rt(),r,x),i))),32768&t.$$.dirty&&v.invalidate()},[T,y,w,u,f,d,m,h,c,l]}class de extends $t{constructor(t){super(),vt(this,t,fe,ue,m,{location:3,lookAt:4,up:5,rotation:6,scale:7})}}var me,pe=new Map,ge=(r(me={},5126,(function(t,e,n){return t.uniform1f(e,n)})),r(me,35664,(function(t,e,n){return t.uniform2fv(e,n)})),r(me,35665,(function(t,e,n){return t.uniform3fv(e,n)})),r(me,35666,(function(t,e,n){return t.uniform4fv(e,n)})),r(me,35674,(function(t,e,n){return t.uniformMatrix2fv(e,!1,n)})),r(me,35675,(function(t,e,n){return t.uniformMatrix3fv(e,!1,n)})),r(me,35676,(function(t,e,n){return t.uniformMatrix4fv(e,!1,n)})),r(me,35678,(function(t,e,n){t.activeTexture(t["TEXTURE".concat(n.index)]),t.bindTexture(t.TEXTURE_2D,n.texture),t.uniform1i(e,n.index)})),me);function he(t,e,n){pe.has(t)||pe.set(t,new Map);var o=pe.get(t),r=e+n;if(!o.has(r)){var i=function(t,e,n){var o=t.createProgram();if(t.attachShader(o,ye(t,t.VERTEX_SHADER,e,"vertex")),t.attachShader(o,ye(t,t.FRAGMENT_SHADER,n,"fragment")),t.linkProgram(o),!t.getProgramParameter(o,t.LINK_STATUS))throw console.log(t.getProgramInfoLog(o)),new Error("Failed to compile program:\n".concat(t.getProgramInfoLog(o)));return o}(t,e,n),a=function(t,e){for(var n=[],o=t.getProgramParameter(e,t.ACTIVE_UNIFORMS),r=0;r<o;r+=1){var i=t.getActiveUniform(e,r),a=i.size,s=i.type,l=i.name,c=t.getUniformLocation(e,l),u=ge[s];n.push({size:a,type:s,name:l,setter:u,loc:c})}return n}(t,i),s=function(t,e){for(var n=[],o=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES),r=0;r<o;r+=1){var i=t.getActiveAttrib(e,r),a=i.size,s=i.type,l=i.name;l=l.replace("[0]","");var c=t.getAttribLocation(e,l);n.push({size:a,type:s,name:l,loc:c})}return n}(t,i);o.set(r,{program:i,uniforms:a,attributes:s})}return o.get(r)}function ve(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4;for(t=String(t);t.length<e;)t=" ".concat(t);return t}function $e(t,e){for(var n="";e--;)n+=t;return n}function ye(t,e,n,o){var r=t.createShader(e);if(t.shaderSource(r,n),t.compileShader(r),t.getShaderParameter(r,t.COMPILE_STATUS))return r;var i=t.getShaderInfoLog(r),a=/ERROR: (\d+):(\d+): (.+)/.exec(i);if(a){var s=+a[1],l=+a[2]-1;console.log("%c"+a[3],"font-weight: bold; color: red");for(var c=n.split("\n"),u=0;u<c.length;u+=1)if(!(Math.abs(l-u)>5)){var f=c[u].replace(/^\t+/gm,(function(t){return $e(" ",4*t.length)})),d=/^\s+/.exec(f),m="".concat(ve(u),": ").concat(f);u===l?(console.log("%c"+m,"font-weight: bold; color: red"),console.log("%c"+(d&&d[0]||"")+$e(" ",s+6)+"^","color: red")):console.log(m)}throw new Error("Failed to compile ".concat(o," shader"))}throw new Error("Failed to compile ".concat(o," shader:\n").concat(i))}var _e=function(){function t(n,o,r,i){var a=this;e(this,t),this.scene=n;var s=n.gl;this.gl=s;var l=he(s,"#version 300 es\n\n"+n.defines+i+"\n\n\nprecision highp float;\nuniform mat4 MODEL;\nuniform mat4 PROJECTION;\nuniform mat4 VIEW;\nuniform mat4 MODEL_INVERSE_TRANSPOSE;\nuniform vec3 CAMERA_WORLD_POSITION;\nstruct PointLight {\n\tvec3 location;\n\tvec3 color;\n\tfloat intensity;\n};\nuniform PointLight POINT_LIGHTS[NUM_LIGHTS];\n\n\n"+o,"#version 300 es\n\n"+n.defines+i+"\n\n#extension GL_OES_standard_derivatives : enable\nprecision highp float;\nstruct DirectionalLight {\n\tvec3 direction;\n\tvec3 color;\n\tfloat intensity;\n};\nstruct PointLight {\n\tvec3 location;\n\tvec3 color;\n\tfloat intensity;\n};\nuniform vec3 AMBIENT_LIGHT;\nuniform DirectionalLight DIRECTIONAL_LIGHTS[NUM_LIGHTS];\nuniform PointLight POINT_LIGHTS[NUM_LIGHTS];\n\n\n"+r),c=l.program,u=l.uniforms,f=l.attributes;this.vertName=null!==o.match(/(?:NAME\s)(.+)/g)?o.match(/(?:NAME\s)(.+)/g)[0].substr(5):"default",this.fragName=null!==r.match(/(?:NAME\s)(.+)/g)?r.match(/(?:NAME\s)(.+)/g)[0].substr(5):"default",this.program=c,this.uniforms=u,this.attributes=f,this.uniform_locations={},this.uniforms.forEach((function(t){!function(t,e,n){for(var o=e.replace(/\]$/,"").split(/\[|\]\.|\./);o.length>1;){var r=o.shift(),i=o[0];t[r]||(t[r]=/^\d+$/.test(i)?[]:{}),t=t[r]}t[o[0]]=n}(a.uniform_locations,t.name,s.getUniformLocation(a.program,t.name))})),this.attribute_locations={},this.attributes.forEach((function(t){a.attribute_locations[t.name]=s.getAttribLocation(a.program,t.name)})),this.raw_values={},this.values={}}return o(t,[{key:"set_uniforms",value:function(t){var e=this,n=0;this.uniforms.forEach((function(o){var r=o.name,i=o.type;o.loc,o.setter,o.processor;if(r in t){var a=t[r];if(a===e.raw_values[r])return;if(35678===i)return void(e.values[r]={texture:a.instantiate(e.scene)._,index:n++});"number"==typeof a&&5126!==i&&(a=It(a)),e.values[r]=a}})),this.raw_values=t}},{key:"apply_uniforms",value:function(t,e,n,o){var r=this;this.uniforms.forEach((function(e){e.name in r.values&&e.setter(t,e.loc,r.values[e.name])})),"function"==typeof o&&o(t,this,n)}},{key:"destroy",value:function(){}}]),t}(),we="in vec3 position;\nin vec3 normal;\nout vec3 v_normal;\n#if defined(has_colormap) || defined(has_specularitymap) || defined(has_normalmap) || defined(has_bumpmap)\n#define has_textures true\n#endif\n#ifdef has_textures\nin vec2 uv;\nout vec2 v_uv;\n#endif\n#if defined(has_normalmap) || defined(has_bumpmap)\nout vec3 v_view_position;\n#endif\nout vec3 v_surface_to_light[NUM_LIGHTS];\n#ifdef has_specularity\nout vec3 v_surface_to_view[NUM_LIGHTS];\n#endif\n#ifdef USE_FOG\nout float v_fog_depth;\n#endif\nvoid main() {\n\tvec4 pos = vec4(position, 1.0);\n\tvec4 model_view_pos = VIEW * MODEL * pos;\n\tv_normal = (MODEL_INVERSE_TRANSPOSE * vec4(normal, 0.0)).xyz;\n\t#ifdef has_textures\n\tv_uv = uv;\n\t#endif\n\t#if defined(has_normalmap) || defined(has_bumpmap)\n\tv_view_position = model_view_pos.xyz;\n\t#endif\n\t#ifdef USE_FOG\n\tv_fog_depth = -model_view_pos.z;\n\t#endif\n\tfor (int i = 0; i < NUM_LIGHTS; i += 1) {\n\t\tPointLight light = POINT_LIGHTS[i];\n\t\tvec3 surface_world_position = (MODEL * pos).xyz;\n\t\tv_surface_to_light[i] = light.location - surface_world_position;\n\t\t#ifdef has_specularity\n\t\tv_surface_to_view[i] = CAMERA_WORLD_POSITION - surface_world_position;\n\t\t#endif\n\t}\n\tgl_Position = PROJECTION * model_view_pos;\n}\n",xe="#if defined(has_colormap) || defined(has_specularitymap) || defined(has_normalmap) || defined(has_bumpmap) || defined(has_emissivemap)\n#define has_textures true\n#endif\n#ifdef has_textures\nin vec2 v_uv;\n#endif\n#ifdef has_specularity\nuniform float specularity;\n#endif\n#ifdef has_colormap\nuniform sampler2D colormap;\n#endif\n#ifdef has_emissivemap\nuniform sampler2D emissivemap;\n#endif\n#ifdef has_specularitymap\nuniform sampler2D specularitymap;\n#endif\n#ifdef has_bumpmap\nuniform sampler2D bumpmap;\nvec2 dHdxy_fwd() {\n\tvec2 dSTdx = dFdx(v_uv);\n\tvec2 dSTdy = dFdy(v_uv);\n\tfloat Hll = texture(bumpmap, v_uv).x;\n\tfloat dBx = texture(bumpmap, v_uv + dSTdx).x - Hll;\n\tfloat dBy = texture(bumpmap, v_uv + dSTdy).x - Hll;\n\t#ifdef has_bumpscale\n\tHll *= bumpscale;\n\tdBx *= bumpscale;\n\tdBy *= bumpscale;\n\t#endif\n\treturn vec2(dBx, dBy);\n}\nvec3 perturbNormalArb(vec3 surf_pos, vec3 surface_normal, vec2 dHdxy) {\n\tvec3 vSigmaX = vec3(dFdx(surf_pos.x), dFdx(surf_pos.y), dFdx(surf_pos.z));\n\tvec3 vSigmaY = vec3(dFdy(surf_pos.x), dFdy(surf_pos.y), dFdy(surf_pos.z));\n\tvec3 vN = surface_normal;\n\tvec3 R1 = cross(vSigmaY, vN);\n\tvec3 R2 = cross(vN, vSigmaX);\n\tfloat fDet = dot(vSigmaX, R1);\n\tfDet *= (float(gl_FrontFacing) * 2.0 - 1.0);\n\tvec3 vGrad = sign(fDet) * (dHdxy.x * R1 + dHdxy.y * R2);\n\treturn normalize(abs(fDet) * surface_normal - vGrad);\n}\n#endif\n#ifdef has_bumpscale\nuniform float bumpscale;\n#endif\n#ifdef has_normalmap\nuniform sampler2D normalmap;\nvec3 perturbNormal2Arb(vec3 eye_pos, vec3 surface_normal) {\n\tvec3 q0 = vec3(dFdx(eye_pos.x), dFdx(eye_pos.y), dFdx(eye_pos.z));\n\tvec3 q1 = vec3(dFdy(eye_pos.x), dFdy(eye_pos.y), dFdy(eye_pos.z));\n\tvec2 st0 = dFdx(v_uv.st);\n\tvec2 st1 = dFdy(v_uv.st);\n\tif (length(q0) == 0.0) {\n\t\treturn surface_normal;\n\t}\n\tfloat scale = sign(st1.t * st0.s - st0.t * st1.s);\n\tvec3 S = normalize((q0 * st1.t - q1 * st0.t) * scale);\n\tvec3 T = normalize((-q0 * st1.s + q1 * st0.s) * scale);\n\tvec3 N = normalize(surface_normal);\n\tmat3 tsn = mat3(S, T, N);\n\tvec3 mapN = texture(normalmap, v_uv).xyz * 2.0 - 1.0;\n\tmapN.xy *= (float(gl_FrontFacing) * 2.0 - 1.0);\n\treturn normalize(tsn * mapN);\n}\n#endif\n#ifdef has_color\nuniform vec3 color;\n#endif\n#ifdef has_emissive\nuniform vec3 emissive;\n#endif\n#ifdef has_alpha\nuniform float alpha;\n#endif\n#ifdef USE_FOG\nuniform vec3 FOG_COLOR;\nuniform float FOG_DENSITY;\nin float v_fog_depth;\n#endif\nin vec3 v_normal;\n#if defined(has_normalmap) || defined(has_bumpmap)\nin vec3 v_view_position;\n#endif\nin vec3 v_surface_to_light[NUM_LIGHTS];\nin vec3 v_surface_to_view[NUM_LIGHTS];\nout mediump vec4 fragColor;\nvoid main () {\n\tvec3 normal = normalize(v_normal);\n\t#ifdef has_bumpmap\n\t\tnormal = perturbNormalArb(-v_view_position, normal, dHdxy_fwd());\n\t#elif defined(has_normalmap)\n\t\tnormal = perturbNormal2Arb(-v_view_position, normal);\n\t#endif\n\tvec3 lighting = vec3(0.0);\n\tvec3 spec_amount = vec3(0.0);\n\tfor (int i = 0; i < NUM_LIGHTS; i += 1) {\n\t\tDirectionalLight light = DIRECTIONAL_LIGHTS[i];\n\t\tfloat multiplier = clamp(dot(normal, -light.direction), 0.0, 1.0);\n\t\tlighting += multiplier * light.color * light.intensity;\n\t}\n\tfor (int i = 0; i < NUM_LIGHTS; i += 1) {\n\t\tPointLight light = POINT_LIGHTS[i];\n\t\tvec3 surface_to_light = normalize(v_surface_to_light[i]);\n\t\tfloat multiplier = clamp(dot(normal, surface_to_light), 0.0, 1.0);\t\tlighting += multiplier * light.color * light.intensity;\n\t\t#ifdef has_specularity\n\t\t\tvec3 surface_to_view = normalize(v_surface_to_view[i]);\n\t\t\tvec3 half_vector = normalize(surface_to_light + surface_to_view);\n\t\t\tfloat spec = clamp(dot(normal, half_vector), 0.0, 1.0);\n\t\t\t#ifdef has_specularitymap\n\t\t\tspec *= texture(specularitymap, v_uv).r;\n\t\t\t#endif\n\t\t\tspec_amount += specularity * spec * light.color * light.intensity;\n\t\t#endif\n\t}\n\t#if defined(has_colormap)\n\tfragColor = texture(colormap, v_uv);\n\t#elif defined(has_color)\n\tfragColor = vec4(color, 1.0);\n\t#endif\n\t#ifdef has_alpha\n\tfragColor.a *= alpha;\n\t#endif\n\tfragColor.rgb *= mix(AMBIENT_LIGHT, vec3(1.0, 1.0, 1.0), lighting);\n\tfragColor.rgb += spec_amount;\n\t#if defined(has_emissivemap)\n\tfragColor.rgb += texture(emissivemap, v_uv);\n\t#elif defined(has_emissive)\n\tfragColor.rgb += emissive;\n\t#endif\n\t#ifdef USE_FOG\n\tfragColor.rgb = mix(\n\t\tfragColor.rgb,\n\t\tFOG_COLOR,\n\t\t1.0 - exp(-FOG_DENSITY * FOG_DENSITY * v_fog_depth * v_fog_depth)\n\t);\n\t#endif\n}\n";function be(t,e,n){let o,{location:r=[0,0,0]}=e,{rotation:i=[0,0,0]}=e,{scale:a=1}=e,{geometry:s}=e,{vert:l=we}=e,{frag:c=xe}=e,{uniforms:u={}}=e,{depthTest:f}=e,{doubleSided:d}=e,{transparent:m=!1}=e;const p=Tt(),h=q(At),{ctm:v}=Lt();g(t,v,t=>n(18,o=t));Rt();const $=Rt(),y={};let _=!0;let w,x,b,A,E,T,L;return U(()=>{y.material&&y.material.destroy()}),t.$$set=t=>{"location"in t&&n(1,r=t.location),"rotation"in t&&n(2,i=t.rotation),"scale"in t&&n(3,a=t.scale),"geometry"in t&&n(4,s=t.geometry),"vert"in t&&n(5,l=t.vert),"frag"in t&&n(6,c=t.frag),"uniforms"in t&&n(7,u=t.uniforms),"depthTest"in t&&n(8,f=t.depthTest),"doubleSided"in t&&n(9,d=t.doubleSided),"transparent"in t&&n(10,m=t.transparent)},t.$$.update=()=>{8&t.$$.dirty&&n(14,w="number"==typeof a?[a,a,a]:a),32772&t.$$.dirty&&n(15,x=ee(x||Zt(),...i)),114690&t.$$.dirty&&n(16,b=Dt(b||Rt(),x,r,w)),458752&t.$$.dirty&&n(17,A=Ct(A||Rt(),o,b)),128&t.$$.dirty&&n(19,E=Object.keys(u).filter(t=>null!=u[t]).map(t=>`#define has_${t} true\n`).join("")),524384&t.$$.dirty&&n(20,T=new _e(p,l,c,E)),1048704&t.$$.dirty&&T.set_uniforms(u),1048592&t.$$.dirty&&n(21,L=s.instantiate(p,T.program)),131072&t.$$.dirty&&(y.model=A),131072&t.$$.dirty&&(y.model_inverse_transpose=(Ot($,A),function(t,e){if(t===e){var n=e[1],o=e[2],r=e[3],i=e[6],a=e[7],s=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=o,t[9]=i,t[11]=e[14],t[12]=r,t[13]=a,t[14]=s}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}($,$))),1048576&t.$$.dirty&&(y.material=T),2097152&t.$$.dirty&&(y.geometry=L),256&t.$$.dirty&&(y.depthTest=f),512&t.$$.dirty&&(y.doubleSided=d),1024&t.$$.dirty&&(y.transparent=m),1024&t.$$.dirty&&(h.add_mesh(y,_),_=!1),132096&t.$$.dirty&&m&&(h.needs_transparency_sort=!0),2228352&t.$$.dirty&&p.invalidate()},[v,r,i,a,s,l,c,u,f,d,m]}class Ae extends $t{constructor(t){super(),vt(this,t,be,null,m,{location:1,rotation:2,scale:3,geometry:4,vert:5,frag:6,uniforms:7,depthTest:8,doubleSided:9,transparent:10})}}function Ee(t,e,n){let o,{id:r}=e,{location:i=[0,0,0]}=e;const{get_target:a}=Tt(),{ctm:s}=Lt();g(t,s,t=>n(8,o=t));let l=Rt();const c=new Float32Array(l.buffer,48,3),u=new Float32Array(3);let f,d,m;return t.$$set=t=>{"id"in t&&n(1,r=t.id),"location"in t&&n(2,i=t.location)},t.$$.update=()=>{4&t.$$.dirty&&n(5,f=i[0]),4&t.$$.dirty&&n(6,d=i[1]),4&t.$$.dirty&&n(7,m=i[2]),224&t.$$.dirty&&(n(4,u[0]=f,u),n(4,u[1]=d,u),n(4,u[2]=m,u)),280&t.$$.dirty&&n(3,l=Nt(l,o,u)),10&t.$$.dirty&&a(r).set(c)},[s,r,i]}class Te extends $t{constructor(t){super(),vt(this,t,Ee,null,m,{id:1,location:2})}}function Le(t,e,n){let{color:o=[1,1,1]}=e,{intensity:r=.2}=e;const i=Tt(),a={};return i.add_ambient_light(a),t.$$set=t=>{"color"in t&&n(0,o=t.color),"intensity"in t&&n(1,r=t.intensity)},t.$$.update=()=>{1&t.$$.dirty&&n(2,a.color=It(o),a),2&t.$$.dirty&&n(2,a.intensity=r,a),4&t.$$.dirty&&i.invalidate()},[o,r]}class Me extends $t{constructor(t){super(),vt(this,t,Le,null,m,{color:0,intensity:1})}}function Ie(t,e,n){let o,{direction:r=new Float32Array([-1,-1,-1])}=e,{color:i=new Float32Array([1,1,1])}=e,{intensity:a=1}=e;const s=Tt(),{ctm:l}=Lt();g(t,l,t=>n(6,o=t));const c={};let u;return s.add_directional_light(c),t.$$set=t=>{"direction"in t&&n(1,r=t.direction),"color"in t&&n(2,i=t.color),"intensity"in t&&n(3,a=t.intensity)},t.$$.update=()=>{98&t.$$.dirty&&n(5,u=Gt(u||Pt(),r,o)),48&t.$$.dirty&&n(4,c.direction=Bt(c.direction||Pt(),u),c),4&t.$$.dirty&&n(4,c.color=It(i),c),8&t.$$.dirty&&n(4,c.intensity=a,c),16&t.$$.dirty&&s.invalidate()},[l,r,i,a]}class Se extends $t{constructor(t){super(),vt(this,t,Ie,null,m,{direction:1,color:2,intensity:3})}}function Fe(t,e,n){let o,{location:r=new Float32Array([-1,-1,-1])}=e,{color:i=new Float32Array([1,1,1])}=e,{intensity:a=1}=e;const s=Tt(),{ctm:l}=Lt();g(t,l,t=>n(5,o=t));let c={location:Pt(),color:null,intensity:null};return s.add_point_light(c),t.$$set=t=>{"location"in t&&n(1,r=t.location),"color"in t&&n(2,i=t.color),"intensity"in t&&n(3,a=t.intensity)},t.$$.update=()=>{50&t.$$.dirty&&n(4,c.location=Gt(c.location,r,o),c),4&t.$$.dirty&&n(4,c.color=It(i),c),8&t.$$.dirty&&n(4,c.intensity=a,c),16&t.$$.dirty&&s.invalidate()},[l,r,i,a]}class ke extends $t{constructor(t){super(),vt(this,t,Fe,null,m,{location:1,color:2,intensity:3})}}function Re(t,e,n){return t<e?e:t>n?n:t}function Oe(t){var e,n=!1;function o(){t(e),n=!1}return function(t){n||(requestAnimationFrame(o),n=!0),e=t}}const Ce=t=>({location:1&t,target:2&t}),Ne=t=>({location:t[0],target:t[1]});function De(t){let e;const n=t[7].default,o=h(n,t,t[6],Ne);return{c(){o&&o.c()},m(t,n){o&&o.m(t,n),e=!0},p(t,[e]){o&&o.p&&67&e&&$(o,n,t,t[6],e,Ce,Ne)},i(t){e||(ct(o,t),e=!0)},o(t){ut(o,t),e=!1},d(t){o&&o.d(t)}}}function ze(t,e){return Math.sqrt(t*t+e*e)}function Pe(t,e,n){let{$$slots:o={},$$scope:r}=e;const i=Tt();let{location:a=new Float32Array([1,3,1])}=e,{target:s=new Float32Array([0,1,0])}=e,{minDistance:l=0}=e,{maxDistance:c=1/0}=e,{minPolarAngle:u=0}=e,{maxPolarAngle:f=Math.PI}=e;function d(t,e){const o=a[0]-s[0],r=a[1]-s[1],i=a[2]-s[2],l=Math.sqrt(o*o+r*r+i*i);let c=Math.atan2(o,i);c-=t;let d=Math.acos(Re(r/l,-1,1));d=Re(d-e,1e-6,Math.PI-1e-6),d=Re(d,u,f);const m=Math.sin(d)*l,p=m*Math.sin(c),g=Math.cos(d)*l,h=m*Math.cos(c);n(0,a[0]=s[0]+p,a),n(0,a[1]=s[1]+g,a),n(0,a[2]=s[2]+h,a)}function m(t,e){const o=a[0]-s[0],r=(a[1],s[1],a[2]-s[2]);{const t=St([o,r]),i=-t[0]*e,l=-t[1]*e;n(0,a[0]+=i,a),n(0,a[2]+=l,a),n(1,s[0]+=i,s),n(1,s[2]+=l,s)}{const e=St([-r,o]),i=e[0]*t,l=e[1]*t;n(0,a[0]+=i,a),n(0,a[2]+=l,a),n(1,s[0]+=i,s),n(1,s[2]+=l,s)}}function p(t){let e=a[0]-s[0],o=a[1]-s[1],r=a[2]-s[2];const i=Math.sqrt(e*e+o*o+r*r);e/=t=Re(t,i/c,l?i/l:1/0),o/=t,r/=t,n(0,a[0]=s[0]+e,a),n(0,a[1]=s[1]+o,a),n(0,a[2]=s[2]+r,a)}function g(t){let e=t.clientX,n=t.clientY;const o=Oe(t=>{const o=t.clientX,r=t.clientY,i=o-e,a=r-n;t.shiftKey||2===t.which?m(.01*i,.01*a):d(.005*i,.005*a),e=o,n=r});window.addEventListener("mousemove",o),window.addEventListener("mouseup",(function t(e){window.removeEventListener("mousemove",o),window.removeEventListener("mouseup",t)}))}const h=Oe(t=>{p(Math.pow(1.004,t.wheelDeltaY))});function v(t){t.preventDefault(),h(t)}function $(t){1===t.touches.length&&function(t){t.preventDefault();const e=t.touches[0],n=e.identifier;let o=e.clientX,r=e.clientY;const i=Oe(t=>{if(t.touches.length>1)return;const e=t.touches[0];if(e.identifier!==n)return;d(.003*(e.clientX-o),.003*(e.clientY-r)),o=e.clientX,r=e.clientY});window.addEventListener("touchmove",i),window.addEventListener("touchend",(function t(e){let o=e.changedTouches.length;for(;o--;){if(e.changedTouches[o].identifier===n)return window.removeEventListener("touchmove",i),void window.removeEventListener("touchend",t)}}))}(t),2===t.touches.length&&function(t){t.preventDefault();const e=t.touches[0],n=t.touches[1],o=e.identifier,r=n.identifier;let i=(e.clientX+n.clientX)/2,a=(e.clientY+n.clientY)/2,s=ze(n.clientX-e.clientX,n.clientY-e.clientY);const l=Oe(t=>{if(2!==t.touches.length)return void alert(t.touches.length+" touches");const e=t.touches[0],n=t.touches[1];if(e.identifier!==o&&e.identifier!==r)return;if(n.identifier!==o&&n.identifier!==r)return;const l=(e.clientX+n.clientX)/2,c=(e.clientY+n.clientY)/2,u=ze(n.clientX-e.clientX,n.clientY-e.clientY);m(.01*(l-i),.01*(c-a)),p(u/s),i=l,a=c,s=u});window.addEventListener("touchmove",l),window.addEventListener("touchend",(function t(e){let n=e.changedTouches.length;for(;n--;){const i=e.changedTouches[n];if(i.identifier===o||i.identifier===r)return window.removeEventListener("touchmove",l),void window.removeEventListener("touchend",t)}}))}(t)}return i.canvas.addEventListener("mousedown",g),i.canvas.addEventListener("mousewheel",v),i.canvas.addEventListener("touchstart",$),U(()=>{i.canvas.removeEventListener("mousedown",g),i.canvas.removeEventListener("mousewheel",v),i.canvas.removeEventListener("touchstart",$)}),t.$$set=t=>{"location"in t&&n(0,a=t.location),"target"in t&&n(1,s=t.target),"minDistance"in t&&n(2,l=t.minDistance),"maxDistance"in t&&n(3,c=t.maxDistance),"minPolarAngle"in t&&n(4,u=t.minPolarAngle),"maxPolarAngle"in t&&n(5,f=t.maxPolarAngle),"$$scope"in t&&n(6,r=t.$$scope)},[a,s,l,c,u,f,r,o]}class He extends $t{constructor(t){super(),vt(this,t,Pe,De,m,{location:0,target:1,minDistance:2,maxDistance:3,minPolarAngle:4,maxPolarAngle:5})}}function Be(t,e,n){let o,r,i,a,l=s,c=()=>(l(),l=p(L,t=>n(12,r=t)),L);t.$$.on_destroy.push(()=>l());let{location:u=[0,0,0]}=e,{lookAt:f=null}=e,{up:d=[0,1,0]}=e,{fov:m=60}=e,{near:h=1}=e,{far:v=2e4}=e;const{add_camera:$,update_camera:y,width:_,height:w,get_target:x}=Tt();g(t,_,t=>n(13,i=t)),g(t,w,t=>n(14,a=t));const{ctm:b}=Lt();g(t,b,t=>n(11,o=t));const A=Rt(),E=new Float32Array(A.buffer,48,3);let T={matrix:A,world_position:E,view:Rt(),projection:Rt()},L=xt(null);return c(),$(T),t.$$set=t=>{"location"in t&&n(4,u=t.location),"lookAt"in t&&n(5,f=t.lookAt),"up"in t&&n(6,d=t.up),"fov"in t&&n(7,m=t.fov),"near"in t&&n(8,h=t.near),"far"in t&&n(9,v=t.far)},t.$$.update=()=>{33&t.$$.dirty&&("string"==typeof f?c(n(0,L=x(f))):L.set(f)),7248&t.$$.dirty&&n(10,T.matrix=(Nt(T.matrix,o,u),r&&zt(T.matrix,E,r,d),T.matrix),T),1024&t.$$.dirty&&n(10,T.view=Ot(T.view,T.matrix),T),26496&t.$$.dirty&&n(10,T.projection=function(t,e,n,o,r){var i,a=1/Math.tan(e/2);return t[0]=a/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=r&&r!==1/0?(i=1/(o-r),t[10]=(r+o)*i,t[14]=2*r*o*i):(t[10]=-1,t[14]=-2*o),t}(T.projection,m/180*Math.PI,i/a,h,v),T),1024&t.$$.dirty&&y(T)},[L,_,w,b,u,f,d,m,h,v]}class Ue extends $t{constructor(t){super(),vt(this,t,Be,null,m,{location:4,lookAt:5,up:6,fov:7,near:8,far:9})}}var Ge=function(){function t(n,o,r,i,a,s){e(this,t),this.scene=n;var l=n.gl;for(var c in this.attributes=r,this.index=i,this.primitive=a,this.count=s,this.locations={},this.buffers={},r){var u=r[c];this.locations[c]=l.getAttribLocation(o,c),"POINTS"===this.primitive&&console.log(c,":",u);var f=l.createBuffer();l.bindBuffer(l.ARRAY_BUFFER,f),l.bufferData(l.ARRAY_BUFFER,u.data,u.dynamic?l.DYNAMIC_DRAW:l.STATIC_DRAW),this.buffers[c]=f}if(i){var d=l.createBuffer();l.bindBuffer(l.ELEMENT_ARRAY_BUFFER,d),l.bufferData(l.ELEMENT_ARRAY_BUFFER,i,l.STATIC_DRAW),this.buffers.__index=d}l.bindBuffer(l.ARRAY_BUFFER,null),l.bindBuffer(l.ELEMENT_ARRAY_BUFFER,null)}return o(t,[{key:"set_attributes",value:function(t){for(var e in this.attributes){var n=this.attributes[e],o=this.locations[e];if(!(o<0)){var r=n.size,i=void 0===r?3:r,a=n.type,s=void 0===a?t.FLOAT:a,l=n.normalized,c=void 0!==l&&l,u=n.stride,f=void 0===u?0:u,d=n.offset,m=void 0===d?0:d,p=this.buffers[e];t.bindBuffer(t.ARRAY_BUFFER,p),t.enableVertexAttribArray(o),t.vertexAttribPointer(o,i,s,c,f,m)}}}},{key:"update",value:function(t,e,n){var o=this.scene,r=o.gl,i=this.attributes[t],a=this.buffers[t];if(r.bindBuffer(r.ARRAY_BUFFER,a),r.bufferData(r.ARRAY_BUFFER,i.data=e,i.dynamic?r.DYNAMIC_DRAW:r.STATIC_DRAW),this.count=n,n===1/0)throw new Error("GL.Geometry must be instantiated with one or more { data, size } attributes");o.invalidate()}}]),t}(),je=function(){function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e(this,t),this.attributes=n;var r=o.index,i=o.primitive,a=void 0===i?"TRIANGLES":i;this.index=r,this.primitive=a.toUpperCase(),this.count=qe(n),this.instances=new Map}return o(t,[{key:"instantiate",value:function(t,e){return this.instances.has(e)||this.instances.set(e,new Ge(t,e,this.attributes,this.index,this.primitive,this.count)),this.instances.get(e)}},{key:"update",value:function(t,e){var n=this;this.attributes[t].data=e,this.count=qe(this.attributes),this.instances.forEach((function(o){o.update(t,e,n.count)}))}}]),t}();function qe(t){var e=1/0;for(var n in t){var o=t[n].data.length/t[n].size;o<e&&(e=o)}return e}var Ye=Ft((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e={x:-.5,y:-.5,z:-.5,w:1,h:1,d:1};for(var n in e)n in t||(t[n]=e[n]);var o=[[t.x+t.w,t.y+t.h,t.z+t.d],[t.x,t.y+t.h,t.z+t.d],[t.x+t.w,t.y,t.z+t.d],[t.x,t.y,t.z+t.d],[t.x,t.y+t.h,t.z],[t.x+t.w,t.y+t.h,t.z],[t.x,t.y,t.z],[t.x+t.w,t.y,t.z]],r=[o[0],o[1],o[2],o[3],o[1],o[4],o[3],o[6],o[4],o[5],o[6],o[7],o[5],o[0],o[7],o[2],o[4],o[1],o[5],o[0],o[3],o[6],o[2],o[7]].flat(1/0);return new je({position:{data:new Float32Array(r),size:3},normal:{data:new Float32Array([0,0,1,0,0,1,0,0,1,0,0,1,-1,0,0,-1,0,0,-1,0,0,-1,0,0,0,0,-1,0,0,-1,0,0,-1,0,0,-1,1,0,0,1,0,0,1,0,0,1,0,0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0]),size:3},uv:{data:new Float32Array([.5,1/4,1/4,1/4,.5,.5,1/4,.5,1/4,1/4,0,1/4,1/4,.5,0,.5,1,1/4,3/4,1/4,1,.5,3/4,.5,3/4,1/4,.5,1/4,3/4,.5,.5,.5,1/4,0,1/4,1/4,.5,0,.5,1/4,1/4,.5,1/4,3/4,.5,.5,.5,3/4]),size:2}},{index:new Uint32Array([0,1,2,3,2,1,4,5,6,6,5,7,8,9,10,11,10,9,12,13,14,15,14,13,16,17,18,19,18,17,20,21,22,23,22,21])})})),We=Ft((function(){return new je({position:{data:new Float32Array([1,1,0,-1,1,0,1,-1,0,-1,-1,0]),size:3},normal:{data:new Float32Array([0,0,1,0,0,1,0,0,1,0,0,1]),size:3},uv:{data:new Float32Array([1,0,0,0,1,1,0,1]),size:2}},{index:new Uint32Array([0,1,2,3,2,1])})})),Xe=.85065080835204,Ve=.5257311121191336,Je=new Float32Array([-Ve,+Xe,0,+Ve,+Xe,0,-Ve,-Xe,0,+Ve,-Xe,0,0,-Ve,+Xe,0,+Ve,+Xe,0,-Ve,-Xe,0,+Ve,-Xe,+Xe,0,-Ve,+Xe,0,+Ve,-Xe,0,-Ve,-Xe,0,+Ve]),Ke=new Uint16Array([0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1]),Qe=(new je({position:{data:Je,size:3},normal:{data:Je,size:3}},{index:Ke}),Math.PI),Ze=2*Qe;function tn(t,e){for(var n=(t+1)*(e+1),o=2*(e-1)*t,r=new Float32Array(3*n),i=new Float32Array(2*n),a=new Uint32Array(3*o),s=0,l=0,c=0;c<=t;c+=1)for(var u=c/t,f=0;f<=e;f+=1){var d=f/e,m=-Math.cos(u*Ze)*Math.sin(d*Qe),p=Math.cos(d*Qe),g=Math.sin(u*Ze)*Math.sin(d*Qe);r[s++]=m,r[s++]=p,r[s++]=g,i[l++]=u,i[l++]=d}for(var h=0,v=0;v<t;v+=1){var $=v*(e+1);a[h++]=$+0,a[h++]=$+1,a[h++]=$+e+2;for(var y=1;y<e-1;y+=1)a[h++]=$+y,a[h++]=$+y+1,a[h++]=$+y+e+1,a[h++]=$+y+e+1,a[h++]=$+y+1,a[h++]=$+y+e+2;a[h++]=$+e-1,a[h++]=$+e,a[h++]=$+2*e}return new je({position:{data:r,size:3},normal:{data:r,size:3},uv:{data:i,size:2}},{index:a})}function en(t,e){throw new Error("TODO implement flat geometry")}var nn=Ft((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.turns,n=void 0===e?8:e,o=t.bands,r=void 0===o?6:o,i=t.shading,a=void 0===i?"smooth":i;return"smooth"===a?tn(n,r):en()}));"undefined"!=typeof Blob&&URL.createObjectURL(new Blob(["self.onmessage = e => { self.onmessage = null; eval(e.data); };"],{type:"application/javascript"}))||"undefined"!=typeof window&&window.SVELTE_GL_WORKER_URL;const{document:on}=ft;function rn(t,e,n){const o=t.slice();return o[13]=e[n],o[17]=n,o}function an(t,e,n){const o=t.slice();return o[13]=e[n],o[15]=n,o}function sn(t){let e,n;return e=new Ue({props:{location:t[18],lookAt:"center",near:.01,far:1e3}}),{c(){mt(e.$$.fragment)},m(t,o){pt(e,t,o),n=!0},p(t,n){const o={};262144&n&&(o.location=t[18]),e.$set(o)},i(t){n||(ct(e.$$.fragment,t),n=!0)},o(t){ut(e.$$.fragment,t),n=!1},d(t){gt(e,t)}}}function ln(t){let e,n;return e=new Ae({props:{geometry:Ye({x:0,y:0,z:0,w:mn/t[1][t[17]].length,h:1*t[1][t[15]][t[17]],d:pn/t[1].length}),location:[-mn/2+t[17]*(mn/t[1][0].length),0,-pn/2+t[15]*(pn/t[1].length)],rotation:[0,0,0],scale:[t[2],t[3],t[4]],uniforms:{color:t[6](t[0])}}}),{c(){mt(e.$$.fragment)},m(t,o){pt(e,t,o),n=!0},p(t,n){const o={};2&n&&(o.geometry=Ye({x:0,y:0,z:0,w:mn/t[1][t[17]].length,h:1*t[1][t[15]][t[17]],d:pn/t[1].length})),2&n&&(o.location=[-mn/2+t[17]*(mn/t[1][0].length),0,-pn/2+t[15]*(pn/t[1].length)]),28&n&&(o.scale=[t[2],t[3],t[4]]),1&n&&(o.uniforms={color:t[6](t[0])}),e.$set(o)},i(t){n||(ct(e.$$.fragment,t),n=!0)},o(t){ut(e.$$.fragment,t),n=!1},d(t){gt(e,t)}}}function cn(t){let e,n,o=Array(t[1][t[15]].length),r=[];for(let e=0;e<o.length;e+=1)r[e]=ln(rn(t,o,e));const i=t=>ut(r[t],1,1,()=>{r[t]=null});return{c(){for(let t=0;t<r.length;t+=1)r[t].c();e=M()},m(t,o){for(let e=0;e<r.length;e+=1)r[e].m(t,o);x(t,e,o),n=!0},p(t,n){if(95&n){let a;for(o=Array(t[1][t[15]].length),a=0;a<o.length;a+=1){const i=rn(t,o,a);r[a]?(r[a].p(i,n),ct(r[a],1)):(r[a]=ln(i),r[a].c(),ct(r[a],1),r[a].m(e.parentNode,e))}for(st(),a=o.length;a<r.length;a+=1)i(a);lt()}},i(t){if(!n){for(let t=0;t<o.length;t+=1)ct(r[t]);n=!0}},o(t){r=r.filter(Boolean);for(let t=0;t<r.length;t+=1)ut(r[t]);n=!1},d(t){A(r,t),t&&b(e)}}}function un(t){let e,n,o,r;return e=new Ae({props:{geometry:nn({turns:36,bands:36}),location:[0,.2,0],scale:.1,uniforms:{color:16777215,emissive:16711680}}}),o=new ke({props:{location:[0,0,0],color:16711680,intensity:.6}}),{c(){mt(e.$$.fragment),n=L(),mt(o.$$.fragment)},m(t,i){pt(e,t,i),x(t,n,i),pt(o,t,i),r=!0},p:s,i(t){r||(ct(e.$$.fragment,t),ct(o.$$.fragment,t),r=!0)},o(t){ut(e.$$.fragment,t),ut(o.$$.fragment,t),r=!1},d(t){gt(e,t),t&&b(n),gt(o,t)}}}function fn(t){let e,n,o,r,i,a,s,l,c,u,f,d,m,p,g,h,v,$,y,_,w,E,T,M,I;e=new Te({props:{id:"center",location:[0,t[3]/2,0]}}),o=new He({props:{maxPolarAngle:Math.PI/2,$$slots:{default:[sn,({location:t})=>({18:t}),({location:t})=>t?262144:0]},$$scope:{ctx:t}}}),i=new Me({props:{intensity:.3}}),s=new Se({props:{direction:[-1,-1,-1],intensity:.5}});let S=Array(t[1].length),F=[];for(let e=0;e<S.length;e+=1)F[e]=cn(an(t,S,e));const k=t=>ut(F[t],1,1,()=>{F[t]=null});return u=new Ae({props:{geometry:nn({turns:36,bands:36}),location:[-.5,2.4,1.2],scale:.4,uniforms:{color:1193046,alpha:.9},transparent:!0}}),d=new Ae({props:{geometry:nn({turns:36,bands:36}),location:[-1.4,2.6,.2],scale:.6,uniforms:{color:3368516,alpha:1},transparent:!0}}),p=new Ae({props:{geometry:We(),location:[0,-.01,0],rotation:[-90,0,0],scale:10,uniforms:{color:16777215}}}),h=new Ae({props:{geometry:We(),location:[0,5,0],rotation:[90,0,0],scale:10,uniforms:{color:16777215}}}),$=new Ae({props:{geometry:We(),location:[0,-.01,-10],rotation:[0,0,0],scale:10,uniforms:{color:16777215}}}),_=new Ae({props:{geometry:We(),location:[10,-.01,0],rotation:[0,-90,0],scale:10,uniforms:{color:16777215}}}),E=new Ae({props:{geometry:We(),location:[-10,-.01,0],rotation:[0,90,0],scale:10,uniforms:{color:16777215}}}),M=new de({props:{location:[t[5].x,t[5].y,t[5].z],$$slots:{default:[un]},$$scope:{ctx:t}}}),{c(){mt(e.$$.fragment),n=L(),mt(o.$$.fragment),r=L(),mt(i.$$.fragment),a=L(),mt(s.$$.fragment),l=L();for(let t=0;t<F.length;t+=1)F[t].c();c=L(),mt(u.$$.fragment),f=L(),mt(d.$$.fragment),m=L(),mt(p.$$.fragment),g=L(),mt(h.$$.fragment),v=L(),mt($.$$.fragment),y=L(),mt(_.$$.fragment),w=L(),mt(E.$$.fragment),T=L(),mt(M.$$.fragment)},m(t,b){pt(e,t,b),x(t,n,b),pt(o,t,b),x(t,r,b),pt(i,t,b),x(t,a,b),pt(s,t,b),x(t,l,b);for(let e=0;e<F.length;e+=1)F[e].m(t,b);x(t,c,b),pt(u,t,b),x(t,f,b),pt(d,t,b),x(t,m,b),pt(p,t,b),x(t,g,b),pt(h,t,b),x(t,v,b),pt($,t,b),x(t,y,b),pt(_,t,b),x(t,w,b),pt(E,t,b),x(t,T,b),pt(M,t,b),I=!0},p(t,n){const r={};8&n&&(r.location=[0,t[3]/2,0]),e.$set(r);const i={};if(786432&n&&(i.$$scope={dirty:n,ctx:t}),o.$set(i),95&n){let e;for(S=Array(t[1].length),e=0;e<S.length;e+=1){const o=an(t,S,e);F[e]?(F[e].p(o,n),ct(F[e],1)):(F[e]=cn(o),F[e].c(),ct(F[e],1),F[e].m(c.parentNode,c))}for(st(),e=S.length;e<F.length;e+=1)k(e);lt()}const a={};32&n&&(a.location=[t[5].x,t[5].y,t[5].z]),524288&n&&(a.$$scope={dirty:n,ctx:t}),M.$set(a)},i(t){if(!I){ct(e.$$.fragment,t),ct(o.$$.fragment,t),ct(i.$$.fragment,t),ct(s.$$.fragment,t);for(let t=0;t<S.length;t+=1)ct(F[t]);ct(u.$$.fragment,t),ct(d.$$.fragment,t),ct(p.$$.fragment,t),ct(h.$$.fragment,t),ct($.$$.fragment,t),ct(_.$$.fragment,t),ct(E.$$.fragment,t),ct(M.$$.fragment,t),I=!0}},o(t){ut(e.$$.fragment,t),ut(o.$$.fragment,t),ut(i.$$.fragment,t),ut(s.$$.fragment,t),F=F.filter(Boolean);for(let t=0;t<F.length;t+=1)ut(F[t]);ut(u.$$.fragment,t),ut(d.$$.fragment,t),ut(p.$$.fragment,t),ut(h.$$.fragment,t),ut($.$$.fragment,t),ut(_.$$.fragment,t),ut(E.$$.fragment,t),ut(M.$$.fragment,t),I=!1},d(t){gt(e,t),t&&b(n),gt(o,t),t&&b(r),gt(i,t),t&&b(a),gt(s,t),t&&b(l),A(F,t),t&&b(c),gt(u,t),t&&b(f),gt(d,t),t&&b(m),gt(p,t),t&&b(g),gt(h,t),t&&b(v),gt($,t),t&&b(y),gt(_,t),t&&b(w),gt(E,t),t&&b(T),gt(M,t)}}}function dn(t){let e,n,o,r,i,a,s,l,c,u,d,m,p,g,h,v,$,y,_,A,M,F,k,N,D,z,P,H,B,U,G,j,q,Y,W;return e=new Qt({props:{$$slots:{default:[fn]},$$scope:{ctx:t}}}),{c(){mt(e.$$.fragment),n=L(),o=E("div"),r=E("label"),i=E("input"),a=L(),s=E("label"),l=E("input"),m=T(" width ("),p=T(t[2]),g=T(")"),h=L(),v=E("label"),$=E("input"),M=T(" height ("),F=T(t[3]),k=T(")"),N=L(),D=E("label"),z=E("input"),U=T(" depth ("),G=T(t[4]),j=T(")"),S(i,"type","color"),C(i,"height","40px"),S(l,"type","range"),S(l,"min",c=.1),S(l,"max",u=5),S(l,"step",d=.1),S($,"type","range"),S($,"min",y=.1),S($,"max",_=5),S($,"step",A=.1),S(z,"type","range"),S(z,"min",P=.1),S(z,"max",H=5),S(z,"step",B=.1),S(o,"class","controls svelte-1uh6m8g")},m(c,u){pt(e,c,u),x(c,n,u),x(c,o,u),w(o,r),w(r,i),O(i,t[0]),w(o,a),w(o,s),w(s,l),O(l,t[2]),w(s,m),w(s,p),w(s,g),w(o,h),w(o,v),w(v,$),O($,t[3]),w(v,M),w(v,F),w(v,k),w(o,N),w(o,D),w(D,z),O(z,t[4]),w(D,U),w(D,G),w(D,j),q=!0,Y||(W=[I(i,"input",t[8]),I(l,"change",t[9]),I(l,"input",t[9]),I($,"change",t[10]),I($,"input",t[10]),I(z,"change",t[11]),I(z,"input",t[11])],Y=!0)},p(t,[n]){const o={};524351&n&&(o.$$scope={dirty:n,ctx:t}),e.$set(o),1&n&&O(i,t[0]),4&n&&O(l,t[2]),(!q||4&n)&&R(p,t[2]),8&n&&O($,t[3]),(!q||8&n)&&R(F,t[3]),16&n&&O(z,t[4]),(!q||16&n)&&R(G,t[4])},i(t){q||(ct(e.$$.fragment,t),q=!0)},o(t){ut(e.$$.fragment,t),q=!1},d(t){gt(e,t),t&&b(n),t&&b(o),Y=!1,f(W)}}}const mn=10,pn=10;function gn(t,e,n){let{title:o}=e,{color:r="#ff3e00"}=e;const i=JSON.parse(document.getElementById("data_in_html").children[0].innerHTML),a=[];for(let t=0;t<i.length;t++){const e=[];for(const n of Object.getOwnPropertyNames(i[t]))e.push(i[t][n]);a[t]=e}console.log(a);let s=1,l=1,c=1;const u={};return B(()=>{let t;const e=()=>{t=requestAnimationFrame(e),n(5,u.x=3*Math.sin(.001*Date.now()),u),n(5,u.y=2.5+2*Math.sin(4e-4*Date.now()),u),n(5,u.z=3*Math.cos(.002*Date.now()),u)};return e(),()=>cancelAnimationFrame(t)}),t.$$set=t=>{"title"in t&&n(7,o=t.title),"color"in t&&n(0,r=t.color)},[r,a,s,l,c,u,t=>parseInt(t.slice(1),16),o,function(){r=this.value,n(0,r)},function(){s=F(this.value),n(2,s)},function(){l=F(this.value),n(3,l)},function(){c=F(this.value),n(4,c)}]}const{document:hn}=ft;function vn(t,e,n){const o=t.slice();return o[11]=e[n],o[12]=e,o[13]=n,o}function $n(t){let e,n=t[0].values,o=[];for(let e=0;e<n.length;e+=1)o[e]=yn(vn(t,n,e));return{c(){for(let t=0;t<o.length;t+=1)o[t].c();e=M()},m(t,n){for(let e=0;e<o.length;e+=1)o[e].m(t,n);x(t,e,n)},p(t,r){if(1&r){let i;for(n=t[0].values,i=0;i<n.length;i+=1){const a=vn(t,n,i);o[i]?o[i].p(a,r):(o[i]=yn(a),o[i].c(),o[i].m(e.parentNode,e))}for(;i<o.length;i+=1)o[i].d(1);o.length=n.length}},d(t){A(o,t),t&&b(e)}}}function yn(t){let e,n,o,r,i,a,s,l,c=t[0].labels[t[13]]+"";function u(){t[6].call(n,t[12],t[13])}return{c(){e=E("label"),n=E("input"),o=L(),r=T(c),i=L(),a=E("br"),S(n,"type","checkbox")},m(c,f){x(c,e,f),w(e,n),n.checked=t[11],w(e,o),w(e,r),w(e,i),x(c,a,f),s||(l=I(n,"change",u),s=!0)},p(e,o){t=e,1&o&&(n.checked=t[11]),1&o&&c!==(c=t[0].labels[t[13]]+"")&&R(r,c)},d(t){t&&b(e),t&&b(a),s=!1,l()}}}function _n(t){let e,n,o,r,i=t[0].labels.length>0&&t[0].values.length>0&&$n(t);return{c(){e=E("div"),n=E("h4"),o=T(t[1]),r=L(),i&&i.c(),S(n,"class","svelte-1rjvq46"),S(e,"class","controls svelte-1rjvq46")},m(t,a){x(t,e,a),w(e,n),w(n,o),w(e,r),i&&i.m(e,null)},p(t,[n]){2&n&&R(o,t[1]),t[0].labels.length>0&&t[0].values.length>0?i?i.p(t,n):(i=$n(t),i.c(),i.m(e,null)):i&&(i.d(1),i=null)},i:s,o:s,d(t){t&&b(e),i&&i.d()}}}function wn(t,e,n){let{title:o}=e,{color:r="#ff3e00"}=e,{optionFlags:i=[]}=e,{viewLocation:a}=e,{viewTarget:s}=e,l=G(),c=0;return t.$$set=t=>{"title"in t&&n(1,o=t.title),"color"in t&&n(2,r=t.color),"optionFlags"in t&&n(0,i=t.optionFlags),"viewLocation"in t&&n(3,a=t.viewLocation),"viewTarget"in t&&n(4,s=t.viewTarget)},[i,o,r,a,s,function(){console.log("Initializing Navigation Controls..."),document.querySelectorAll(".controls h4").forEach(t=>{console.log(t);const e=3*window.innerHeight/4;t.addEventListener("click",(function(t){let n=0;setInterval((function(){n<e&&scroll({top:n,left:0}),n+=Math.floor(e/(533/33))}),33)})),t.title="Click To See Article"}),document.querySelectorAll("canvas").forEach(t=>{console.log(t),t.addEventListener("wheel",(function(t){const e=t||window.event;(new Date).getTime()-c>66&&(c=(new Date).getTime(),e.deltaY<0?l("up"):e.deltaY>0&&l("down")),e.preventDefault()}))}),document.querySelectorAll("canvas").forEach(t=>{console.log(t),t.addEventListener("keydown",(function(t){const e=t||window.event;if((new Date).getTime()-c>66)return c=(new Date).getTime(),32===e.keyCode?(e.preventDefault(),!0):38===e.keyCode||87===e.keyCode?(l("forward"),e.preventDefault(),!0):40===e.keyCode||83===e.keyCode?(l("backward"),e.preventDefault(),!0):37===e.keyCode||65===e.keyCode?(l("left"),e.preventDefault(),!0):39===e.keyCode||68===e.keyCode?(l("right"),e.preventDefault(),!0):(console.log("Keyboard Event: ",e.keyCode),!1)}))})},function(t,e){t[e]=this.checked,n(0,i)}]}class xn extends $t{constructor(t){var e;super(),hn.getElementById("svelte-1rjvq46-style")||((e=E("style")).id="svelte-1rjvq46-style",e.textContent=".controls.svelte-1rjvq46 h4.svelte-1rjvq46{cursor:pointer;pointer-events:all}",w(hn.head,e)),vt(this,t,wn,_n,m,{title:1,color:2,optionFlags:0,viewLocation:3,viewTarget:4,init:5})}get init(){return this.$$.ctx[5]}}const{document:bn}=ft;function An(t,e,n){const o=t.slice();return o[26]=e[n],o[30]=n,o}function En(t,e,n){const o=t.slice();return o[26]=e[n],o[28]=n,o}function Tn(t){let e,n,o,r,i=t[12](t[3],t[4])+"";return o=new Ue({props:{location:t[3],lookAt:"center",near:.01,far:1e3}}),{c(){e=T(i),n=L(),mt(o.$$.fragment)},m(t,i){x(t,e,i),x(t,n,i),pt(o,t,i),r=!0},p(t,n){(!r||24&n[0])&&i!==(i=t[12](t[3],t[4])+"")&&R(e,i);const a={};8&n[0]&&(a.location=t[3]),o.$set(a)},i(t){r||(ct(o.$$.fragment,t),r=!0)},o(t){ut(o.$$.fragment,t),r=!1},d(t){t&&b(e),t&&b(n),gt(o,t)}}}function Ln(t){let e,n;return e=new Ae({props:{geometry:Ye({x:0,y:0,z:0,w:kn/t[9][t[30]].length,h:1*t[9][t[28]][t[30]],d:Rn/t[9].length}),location:[-kn/2+t[30]*(kn/t[9][0].length),0,-Rn/2+t[28]*(Rn/t[9].length)],rotation:[0,0,0],scale:[t[5],t[6],t[7]],uniforms:{color:On(t[1],t[9][t[28]][t[30]])}}}),{c(){mt(e.$$.fragment)},m(t,o){pt(e,t,o),n=!0},p(t,n){const o={};512&n[0]&&(o.geometry=Ye({x:0,y:0,z:0,w:kn/t[9][t[30]].length,h:1*t[9][t[28]][t[30]],d:Rn/t[9].length})),512&n[0]&&(o.location=[-kn/2+t[30]*(kn/t[9][0].length),0,-Rn/2+t[28]*(Rn/t[9].length)]),224&n[0]&&(o.scale=[t[5],t[6],t[7]]),514&n[0]&&(o.uniforms={color:On(t[1],t[9][t[28]][t[30]])}),e.$set(o)},i(t){n||(ct(e.$$.fragment,t),n=!0)},o(t){ut(e.$$.fragment,t),n=!1},d(t){gt(e,t)}}}function Mn(t){let e,n,o=Array(t[9][t[28]].length),r=[];for(let e=0;e<o.length;e+=1)r[e]=Ln(An(t,o,e));const i=t=>ut(r[t],1,1,()=>{r[t]=null});return{c(){for(let t=0;t<r.length;t+=1)r[t].c();e=M()},m(t,o){for(let e=0;e<r.length;e+=1)r[e].m(t,o);x(t,e,o),n=!0},p(t,n){if(738&n[0]){let a;for(o=Array(t[9][t[28]].length),a=0;a<o.length;a+=1){const i=An(t,o,a);r[a]?(r[a].p(i,n),ct(r[a],1)):(r[a]=Ln(i),r[a].c(),ct(r[a],1),r[a].m(e.parentNode,e))}for(st(),a=o.length;a<r.length;a+=1)i(a);lt()}},i(t){if(!n){for(let t=0;t<o.length;t+=1)ct(r[t]);n=!0}},o(t){r=r.filter(Boolean);for(let t=0;t<r.length;t+=1)ut(r[t]);n=!1},d(t){A(r,t),t&&b(e)}}}function In(t){let e,n,o,r;return e=new Ae({props:{geometry:nn({turns:36,bands:36}),location:[0,.2,0],scale:.1,uniforms:{color:16777215,emissive:16711680}}}),o=new ke({props:{location:[0,0,0],color:16711680,intensity:.6}}),{c(){mt(e.$$.fragment),n=L(),mt(o.$$.fragment)},m(t,i){pt(e,t,i),x(t,n,i),pt(o,t,i),r=!0},p:s,i(t){r||(ct(e.$$.fragment,t),ct(o.$$.fragment,t),r=!0)},o(t){ut(e.$$.fragment,t),ut(o.$$.fragment,t),r=!1},d(t){gt(e,t),t&&b(n),gt(o,t)}}}function Sn(t){let e,n,o,r,i,a,s,l,c,u,f;e=new Te({props:{id:"center",location:[0,t[6]/2,0]}}),o=new He({props:{maxPolarAngle:Math.PI/2,location:t[3],target:t[4],$$slots:{default:[Tn]},$$scope:{ctx:t}}}),i=new Me({props:{intensity:.3}}),s=new Se({props:{direction:[-1,-1,-1],intensity:.5}});let d=Array(t[9].length),m=[];for(let e=0;e<d.length;e+=1)m[e]=Mn(En(t,d,e));const p=t=>ut(m[t],1,1,()=>{m[t]=null});return u=new de({props:{location:[t[8].x,t[8].y,t[8].z],$$slots:{default:[In]},$$scope:{ctx:t}}}),{c(){mt(e.$$.fragment),n=L(),mt(o.$$.fragment),r=L(),mt(i.$$.fragment),a=L(),mt(s.$$.fragment),l=L();for(let t=0;t<m.length;t+=1)m[t].c();c=L(),mt(u.$$.fragment)},m(t,d){pt(e,t,d),x(t,n,d),pt(o,t,d),x(t,r,d),pt(i,t,d),x(t,a,d),pt(s,t,d),x(t,l,d);for(let e=0;e<m.length;e+=1)m[e].m(t,d);x(t,c,d),pt(u,t,d),f=!0},p(t,n){const r={};64&n[0]&&(r.location=[0,t[6]/2,0]),e.$set(r);const i={};if(8&n[0]&&(i.location=t[3]),16&n[0]&&(i.target=t[4]),24&n[0]|1&n[1]&&(i.$$scope={dirty:n,ctx:t}),o.$set(i),738&n[0]){let e;for(d=Array(t[9].length),e=0;e<d.length;e+=1){const o=En(t,d,e);m[e]?(m[e].p(o,n),ct(m[e],1)):(m[e]=Mn(o),m[e].c(),ct(m[e],1),m[e].m(c.parentNode,c))}for(st(),e=d.length;e<m.length;e+=1)p(e);lt()}const a={};256&n[0]&&(a.location=[t[8].x,t[8].y,t[8].z]),1&n[1]&&(a.$$scope={dirty:n,ctx:t}),u.$set(a)},i(t){if(!f){ct(e.$$.fragment,t),ct(o.$$.fragment,t),ct(i.$$.fragment,t),ct(s.$$.fragment,t);for(let t=0;t<d.length;t+=1)ct(m[t]);ct(u.$$.fragment,t),f=!0}},o(t){ut(e.$$.fragment,t),ut(o.$$.fragment,t),ut(i.$$.fragment,t),ut(s.$$.fragment,t),m=m.filter(Boolean);for(let t=0;t<m.length;t+=1)ut(m[t]);ut(u.$$.fragment,t),f=!1},d(t){gt(e,t),t&&b(n),gt(o,t),t&&b(r),gt(i,t),t&&b(a),gt(s,t),t&&b(l),A(m,t),t&&b(c),gt(u,t)}}}function Fn(t){let e,n,o,r,i,a,s,l,c,u,d,m,p,g,h,v,$,y,_,A,M,F,k,N,D,z,P,H,B,U,G,j,q,Y,X,V,J,K,Q,Z,et,nt;function ot(e){t[15].call(null,e)}let rt={style:"pointer-events: none;",backgroundOpacity:"1.0",process_extra_shader_components:t[13],$$slots:{default:[Sn]},$$scope:{ctx:t}};function it(e){t[16].call(null,e)}function at(e){t[17].call(null,e)}function st(e){t[18].call(null,e)}function lt(e){t[19].call(null,e)}void 0!==t[11]&&(rt.gl=t[11]),e=new Qt({props:rt}),W.push(()=>dt(e,"gl",ot));let ft={title:t[2]};return void 0!==t[10]&&(ft.init=t[10]),void 0!==t[0]&&(ft.optionFlags=t[0]),void 0!==t[3]&&(ft.viewLocation=t[3]),void 0!==t[4]&&(ft.viewTarget=t[4]),r=new xn({props:ft}),W.push(()=>dt(r,"init",it)),W.push(()=>dt(r,"optionFlags",at)),W.push(()=>dt(r,"viewLocation",st)),W.push(()=>dt(r,"viewTarget",lt)),r.$on("move",t[20]),{c(){mt(e.$$.fragment),o=L(),mt(r.$$.fragment),c=L(),u=E("div"),d=E("label"),m=E("input"),p=L(),g=E("label"),h=E("input"),_=T(" width ("),A=T(t[5]),M=T(")"),F=L(),k=E("label"),N=E("input"),H=T(" height ("),B=T(t[6]),U=T(")"),G=L(),j=E("label"),q=E("input"),J=T(" depth ("),K=T(t[7]),Q=T(")"),S(m,"type","color"),C(m,"height","40px"),S(h,"type","range"),S(h,"min",v=.1),S(h,"max",$=5),S(h,"step",y=.1),S(N,"type","range"),S(N,"min",D=.1),S(N,"max",z=5),S(N,"step",P=.1),S(q,"type","range"),S(q,"min",Y=.1),S(q,"max",X=5),S(q,"step",V=.1),S(u,"class","controls svelte-jjuo5q")},m(n,i){pt(e,n,i),x(n,o,i),pt(r,n,i),x(n,c,i),x(n,u,i),w(u,d),w(d,m),O(m,t[1]),w(u,p),w(u,g),w(g,h),O(h,t[5]),w(g,_),w(g,A),w(g,M),w(u,F),w(u,k),w(k,N),O(N,t[6]),w(k,H),w(k,B),w(k,U),w(u,G),w(u,j),w(j,q),O(q,t[7]),w(j,J),w(j,K),w(j,Q),Z=!0,et||(nt=[I(m,"input",t[21]),I(h,"change",t[22]),I(h,"input",t[22]),I(N,"change",t[23]),I(N,"input",t[23]),I(q,"change",t[24]),I(q,"input",t[24])],et=!0)},p(t,o){const c={};1018&o[0]|1&o[1]&&(c.$$scope={dirty:o,ctx:t}),!n&&2048&o[0]&&(n=!0,c.gl=t[11],tt(()=>n=!1)),e.$set(c);const u={};4&o[0]&&(u.title=t[2]),!i&&1024&o[0]&&(i=!0,u.init=t[10],tt(()=>i=!1)),!a&&1&o[0]&&(a=!0,u.optionFlags=t[0],tt(()=>a=!1)),!s&&8&o[0]&&(s=!0,u.viewLocation=t[3],tt(()=>s=!1)),!l&&16&o[0]&&(l=!0,u.viewTarget=t[4],tt(()=>l=!1)),r.$set(u),2&o[0]&&O(m,t[1]),32&o[0]&&O(h,t[5]),(!Z||32&o[0])&&R(A,t[5]),64&o[0]&&O(N,t[6]),(!Z||64&o[0])&&R(B,t[6]),128&o[0]&&O(q,t[7]),(!Z||128&o[0])&&R(K,t[7])},i(t){Z||(ct(e.$$.fragment,t),ct(r.$$.fragment,t),Z=!0)},o(t){ut(e.$$.fragment,t),ut(r.$$.fragment,t),Z=!1},d(t){gt(e,t),t&&b(o),gt(r,t),t&&b(c),t&&b(u),et=!1,f(nt)}}}const kn=10,Rn=10;function On(t,e=1){const n=parseInt("0x"+t.substr(1,2),16),o=parseInt("0x"+t.substr(3,2),16),r=parseInt("0x"+t.substr(5,2),16),i=Math.floor(n*(e/.25)),a=Math.floor(r*(e/.25));return Math.abs(((i<255?i:n)<<16)+(o<<8)+(a<255?a:r))}function Cn(t,e,n){let{title:o}=e,{options:r={labels:[],values:[]}}=e,i=!1,a=new Float32Array([0,10,5]),s=new Float32Array([0,1,0]),l=1,c=1,u=1;const f={},d=[];let m,p,{color:g="#ff3e00"}=e,h=t=>{console.log(t)};B(()=>{let t;if(!i){i=!0;const e=JSON.parse(document.getElementById("gl_data_in_html").children[0].innerHTML);for(let t=0;t<e.length;t++){const o=[];for(const n of Object.getOwnPropertyNames(e[t]))o.push(e[t][n]);n(9,d[t]=o,d)}console.log(d),"function"==typeof m&&m();const o=()=>{t=requestAnimationFrame(o),n(8,f.x=3*Math.sin(.001*Date.now()),f),n(8,f.y=2.5+2*Math.sin(4e-4*Date.now()),f),n(8,f.z=3*Math.cos(.002*Date.now()),f)};o()}return()=>cancelAnimationFrame(t)});return t.$$set=t=>{"title"in t&&n(2,o=t.title),"options"in t&&n(0,r=t.options),"color"in t&&n(1,g=t.color)},[r,g,o,a,s,l,c,u,f,d,m,p,(t,e)=>(console.log("location: ",t,"\n","target: ",e),""),(t,e,n)=>{e.program},h,function(t){p=t,n(11,p)},function(t){m=t,n(10,m)},function(t){r=t,n(0,r)},function(t){a=t,n(3,a)},function(t){s=t,n(4,s)},t=>h(t),function(){g=this.value,n(1,g)},function(){l=F(this.value),n(5,l)},function(){c=F(this.value),n(6,c)},function(){u=F(this.value),n(7,u)}]}const{document:Nn}=ft;function Dn(t){let e,n,o,r,i,a,l,c,u,d,m,p,g,h,v,$,y,_,A,M,F,k,R,O,C,N,D,z,P,H;return{c(){e=E("div"),n=E("button"),n.textContent="1",o=L(),r=E("button"),r.textContent="2",i=L(),a=E("button"),a.textContent="3",l=L(),c=E("button"),c.textContent="4",u=L(),d=E("button"),d.textContent="5",m=L(),p=E("button"),p.textContent="6",g=L(),h=E("button"),h.textContent="7",v=L(),$=E("button"),$.textContent="8",y=L(),_=E("button"),_.textContent="9",A=L(),M=E("button"),F=T("clear"),R=L(),O=E("button"),O.textContent="0",C=L(),N=E("button"),D=T("submit"),S(n,"class","svelte-3ldu4t"),S(r,"class","svelte-3ldu4t"),S(a,"class","svelte-3ldu4t"),S(c,"class","svelte-3ldu4t"),S(d,"class","svelte-3ldu4t"),S(p,"class","svelte-3ldu4t"),S(h,"class","svelte-3ldu4t"),S($,"class","svelte-3ldu4t"),S(_,"class","svelte-3ldu4t"),M.disabled=k=!t[0],S(M,"class","svelte-3ldu4t"),S(O,"class","svelte-3ldu4t"),N.disabled=z=!t[0],S(N,"class","svelte-3ldu4t"),S(e,"class","keypad svelte-3ldu4t")},m(s,f){x(s,e,f),w(e,n),w(e,o),w(e,r),w(e,i),w(e,a),w(e,l),w(e,c),w(e,u),w(e,d),w(e,m),w(e,p),w(e,g),w(e,h),w(e,v),w(e,$),w(e,y),w(e,_),w(e,A),w(e,M),w(M,F),w(e,R),w(e,O),w(e,C),w(e,N),w(N,D),P||(H=[I(n,"click",t[1](1)),I(r,"click",t[1](2)),I(a,"click",t[1](3)),I(c,"click",t[1](4)),I(d,"click",t[1](5)),I(p,"click",t[1](6)),I(h,"click",t[1](7)),I($,"click",t[1](8)),I(_,"click",t[1](9)),I(M,"click",t[2]),I(O,"click",t[1](0)),I(N,"click",t[3])],P=!0)},p(t,[e]){1&e&&k!==(k=!t[0])&&(M.disabled=k),1&e&&z!==(z=!t[0])&&(N.disabled=z)},i:s,o:s,d(t){t&&b(e),P=!1,f(H)}}}function zn(t,e,n){let{value:o=""}=e;const r=G(),i=()=>n(0,o=""),a=()=>r("submit");return document.addEventListener("keydown",(function(t){const e=t||window.event;return console.log(e),13===e.keyCode?(a(),e.preventDefault()):8===e.keyCode||46===e.keyCode?(i(),e.preventDefault()):47<e.keyCode&&e.keyCode<58?(n(0,o=`${o}${e.key}`),console.log(o),e.preventDefault()):console.log("Keyboard Event: ",e.keyCode),!0})),t.$$set=t=>{"value"in t&&n(0,o=t.value)},[o,t=>()=>n(0,o=`${o}${t}`),i,a]}class Pn extends $t{constructor(t){var e;super(),Nn.getElementById("svelte-3ldu4t-style")||((e=E("style")).id="svelte-3ldu4t-style",e.textContent=".keypad.svelte-3ldu4t{display:grid;grid-template-columns:repeat(3, 5em);grid-template-rows:repeat(4, 3em);grid-gap:0.5em\n\t}button.svelte-3ldu4t{margin:0\n\t}",w(Nn.head,e)),vt(this,t,zn,Dn,m,{value:0})}}const{document:Hn}=ft;function Bn(t){let e,n;return e=new Ue({props:{location:t[15],lookAt:"center",near:.01,far:1e3}}),{c(){mt(e.$$.fragment)},m(t,o){pt(e,t,o),n=!0},p(t,n){const o={};32768&n&&(o.location=t[15]),e.$set(o)},i(t){n||(ct(e.$$.fragment,t),n=!0)},o(t){ut(e.$$.fragment,t),n=!1},d(t){gt(e,t)}}}function Un(t){let e,n,o,r;return e=new Ae({props:{geometry:nn({turns:36,bands:36}),location:[0,.2,0],scale:.1,uniforms:{color:16777215,emissive:16711680}}}),o=new ke({props:{location:[0,0,0],color:16711680,intensity:.6}}),{c(){mt(e.$$.fragment),n=L(),mt(o.$$.fragment)},m(t,i){pt(e,t,i),x(t,n,i),pt(o,t,i),r=!0},p:s,i(t){r||(ct(e.$$.fragment,t),ct(o.$$.fragment,t),r=!0)},o(t){ut(e.$$.fragment,t),ut(o.$$.fragment,t),r=!1},d(t){gt(e,t),t&&b(n),gt(o,t)}}}function Gn(t){let e,n,o,r,i,a,s,l,c,u,f,d,m,p,g,h,v,$,y,_,w,A,E,T,M,I;return e=new Te({props:{id:"center",location:[0,t[4]/2,0]}}),o=new He({props:{maxPolarAngle:Math.PI/2,$$slots:{default:[Bn,({location:t})=>({15:t}),({location:t})=>t?32768:0]},$$scope:{ctx:t}}}),i=new Me({props:{intensity:.3}}),s=new Se({props:{direction:[-1,-1,-1],intensity:.5}}),c=new Ae({props:{geometry:Ye({}),location:[0,t[4]/2,0],rotation:[0,-20,0],scale:[t[3],t[4],t[5]],uniforms:{color:t[8](t[0])}}}),f=new Ae({props:{geometry:nn({turns:36,bands:36}),location:[-.5,.4,1.2],scale:.4,uniforms:{color:1193046,alpha:.9},transparent:!0}}),m=new Ae({props:{geometry:nn({turns:36,bands:36}),location:[-1.4,.6,.2],scale:.6,uniforms:{color:3368516,alpha:1},transparent:!0}}),g=new Ae({props:{geometry:We(),location:[0,-.01,0],rotation:[-90,0,0],scale:10,uniforms:{color:16777215}}}),v=new Ae({props:{geometry:We(),location:[0,5,0],rotation:[90,0,0],scale:10,uniforms:{color:16777215}}}),y=new Ae({props:{geometry:We(),location:[0,-.01,-10],rotation:[0,0,0],scale:10,uniforms:{color:16777215}}}),w=new Ae({props:{geometry:We(),location:[10,-.01,0],rotation:[0,-90,0],scale:10,uniforms:{color:16777215}}}),E=new Ae({props:{geometry:We(),location:[-10,-.01,0],rotation:[0,90,0],scale:10,uniforms:{color:16777215}}}),M=new de({props:{location:[t[6].x,t[6].y,t[6].z],$$slots:{default:[Un]},$$scope:{ctx:t}}}),{c(){mt(e.$$.fragment),n=L(),mt(o.$$.fragment),r=L(),mt(i.$$.fragment),a=L(),mt(s.$$.fragment),l=L(),mt(c.$$.fragment),u=L(),mt(f.$$.fragment),d=L(),mt(m.$$.fragment),p=L(),mt(g.$$.fragment),h=L(),mt(v.$$.fragment),$=L(),mt(y.$$.fragment),_=L(),mt(w.$$.fragment),A=L(),mt(E.$$.fragment),T=L(),mt(M.$$.fragment)},m(t,b){pt(e,t,b),x(t,n,b),pt(o,t,b),x(t,r,b),pt(i,t,b),x(t,a,b),pt(s,t,b),x(t,l,b),pt(c,t,b),x(t,u,b),pt(f,t,b),x(t,d,b),pt(m,t,b),x(t,p,b),pt(g,t,b),x(t,h,b),pt(v,t,b),x(t,$,b),pt(y,t,b),x(t,_,b),pt(w,t,b),x(t,A,b),pt(E,t,b),x(t,T,b),pt(M,t,b),I=!0},p(t,n){const r={};16&n&&(r.location=[0,t[4]/2,0]),e.$set(r);const i={};98304&n&&(i.$$scope={dirty:n,ctx:t}),o.$set(i);const a={};16&n&&(a.location=[0,t[4]/2,0]),56&n&&(a.scale=[t[3],t[4],t[5]]),1&n&&(a.uniforms={color:t[8](t[0])}),c.$set(a);const s={};64&n&&(s.location=[t[6].x,t[6].y,t[6].z]),65536&n&&(s.$$scope={dirty:n,ctx:t}),M.$set(s)},i(t){I||(ct(e.$$.fragment,t),ct(o.$$.fragment,t),ct(i.$$.fragment,t),ct(s.$$.fragment,t),ct(c.$$.fragment,t),ct(f.$$.fragment,t),ct(m.$$.fragment,t),ct(g.$$.fragment,t),ct(v.$$.fragment,t),ct(y.$$.fragment,t),ct(w.$$.fragment,t),ct(E.$$.fragment,t),ct(M.$$.fragment,t),I=!0)},o(t){ut(e.$$.fragment,t),ut(o.$$.fragment,t),ut(i.$$.fragment,t),ut(s.$$.fragment,t),ut(c.$$.fragment,t),ut(f.$$.fragment,t),ut(m.$$.fragment,t),ut(g.$$.fragment,t),ut(v.$$.fragment,t),ut(y.$$.fragment,t),ut(w.$$.fragment,t),ut(E.$$.fragment,t),ut(M.$$.fragment,t),I=!1},d(t){gt(e,t),t&&b(n),gt(o,t),t&&b(r),gt(i,t),t&&b(a),gt(s,t),t&&b(l),gt(c,t),t&&b(u),gt(f,t),t&&b(d),gt(m,t),t&&b(p),gt(g,t),t&&b(h),gt(v,t),t&&b($),gt(y,t),t&&b(_),gt(w,t),t&&b(A),gt(E,t),t&&b(T),gt(M,t)}}}function jn(t){let e,n,o,r,i,a,s,l,c,u,d,m,p,g,h,v,$,y,_,A,M,F,k,N,D,z,P,H,B,U,G,j,q,Y,X,V,J,K,Q,Z,et,nt,ot,rt,it,at,st,lt,ft,ht;function vt(e){t[14].call(null,e)}e=new Qt({props:{style:"pointer-events: none;",$$slots:{default:[Gn]},$$scope:{ctx:t}}});let $t={};return void 0!==t[1]&&($t.value=t[1]),K=new Pn({props:$t}),W.push(()=>dt(K,"value",vt)),K.$on("submit",t[7]),{c(){mt(e.$$.fragment),n=L(),o=E("div"),r=E("label"),i=E("input"),a=L(),s=E("label"),l=E("input"),m=T(" width ("),p=T(t[3]),g=T(")"),h=L(),v=E("label"),$=E("input"),M=T(" height ("),F=T(t[4]),k=T(")"),N=L(),D=E("label"),z=E("input"),U=T(" depth ("),G=T(t[5]),j=T(")"),q=L(),Y=E("div"),X=E("h1"),V=T(t[2]),J=L(),mt(K.$$.fragment),Z=L(),et=E("br"),nt=L(),ot=E("br"),rt=L(),it=E("br"),at=L(),st=E("p"),st.innerHTML='Loading content from Azure Function API: <b id="name">...</b>',S(i,"type","color"),C(i,"height","40px"),S(l,"type","range"),S(l,"min",c=.1),S(l,"max",u=5),S(l,"step",d=.1),S($,"type","range"),S($,"min",y=.1),S($,"max",_=5),S($,"step",A=.1),S(z,"type","range"),S(z,"min",P=.1),S(z,"max",H=5),S(z,"step",B=.1),S(o,"class","controls"),C(X,"color",t[1]?"#999":"#fff"),S(X,"class","svelte-zxgh1x"),S(Y,"class","controls keys svelte-zxgh1x")},m(c,u){pt(e,c,u),x(c,n,u),x(c,o,u),w(o,r),w(r,i),O(i,t[0]),w(o,a),w(o,s),w(s,l),O(l,t[3]),w(s,m),w(s,p),w(s,g),w(o,h),w(o,v),w(v,$),O($,t[4]),w(v,M),w(v,F),w(v,k),w(o,N),w(o,D),w(D,z),O(z,t[5]),w(D,U),w(D,G),w(D,j),x(c,q,u),x(c,Y,u),w(Y,X),w(X,V),w(Y,J),pt(K,Y,null),x(c,Z,u),x(c,et,u),x(c,nt,u),x(c,ot,u),x(c,rt,u),x(c,it,u),x(c,at,u),x(c,st,u),lt=!0,ft||(ht=[I(i,"input",t[10]),I(l,"change",t[11]),I(l,"input",t[11]),I($,"change",t[12]),I($,"input",t[12]),I(z,"change",t[13]),I(z,"input",t[13])],ft=!0)},p(t,[n]){const o={};65657&n&&(o.$$scope={dirty:n,ctx:t}),e.$set(o),1&n&&O(i,t[0]),8&n&&O(l,t[3]),(!lt||8&n)&&R(p,t[3]),16&n&&O($,t[4]),(!lt||16&n)&&R(F,t[4]),32&n&&O(z,t[5]),(!lt||32&n)&&R(G,t[5]),(!lt||4&n)&&R(V,t[2]),(!lt||2&n)&&C(X,"color",t[1]?"#999":"#fff");const r={};!Q&&2&n&&(Q=!0,r.value=t[1],tt(()=>Q=!1)),K.$set(r)},i(t){lt||(ct(e.$$.fragment,t),ct(K.$$.fragment,t),lt=!0)},o(t){ut(e.$$.fragment,t),ut(K.$$.fragment,t),lt=!1},d(t){gt(e,t),t&&b(n),t&&b(o),t&&b(q),t&&b(Y),gt(K),t&&b(Z),t&&b(et),t&&b(nt),t&&b(ot),t&&b(rt),t&&b(it),t&&b(at),t&&b(st),ft=!1,f(ht)}}}function qn(t,e,n){let o,r,{title:i}=e;let{color:a="#ff3e00"}=e,s=1,l=1,c=1;const u={};return B(async()=>{let t;const e=()=>{t=requestAnimationFrame(e),n(6,u.x=3*Math.sin(.001*Date.now()),u),n(6,u.y=2.5+2*Math.sin(4e-4*Date.now()),u),n(6,u.z=3*Math.cos(.002*Date.now()),u)};return e(),()=>cancelAnimationFrame(t)}),t.$$set=t=>{"title"in t&&n(9,i=t.title),"color"in t&&n(0,a=t.color)},t.$$.update=()=>{2&t.$$.dirty&&n(2,r=o?o.replace(/\d(?!$)/g,"*"):"enter your pin")},[a,o,r,s,l,c,u,function(){!async function(){try{let{text:t}=await(await fetch("/api/message/$PARAMS".replace("$PARAMS",o?"?name="+o:""))).json();document.querySelector("#name").textContent=t}catch(t){console.error(t)}}(),console.log("submitted "+o)},t=>parseInt(t.slice(1),16),i,function(){a=this.value,n(0,a)},function(){s=F(this.value),n(3,s)},function(){l=F(this.value),n(4,l)},function(){c=F(this.value),n(5,c)},function(t){o=t,n(1,o)}]}var Yn=document.getElementById("svelte-app"),Wn=null===Yn||"HTMLElement"!==Yn.constructor.name&&"HTMLDivElement"!==Yn.constructor.name?{}:new class extends $t{constructor(t){var e;super(),document.getElementById("svelte-90w389-style")||((e=E("style")).id="svelte-90w389-style",e.textContent='canvas.svelte-90w389{width:100%;height:100%;background-color:#666;-webkit-mask:url("../images/svelte-logo-mask.svg") 50% 50% content-box view-box no-repeat;mask:url("../images/svelte-logo-mask.svg") 50% 50% content-box view-box no-repeat}#view.svelte-90w389{text-align:center}',w(document.head,e)),vt(this,t,_t,yt,m,{greeting:0})}}({target:Yn,props:{greeting:"Hooray  - you've built this with <a href='https://github.com/dancingfrog/sveltr' target='_blank'>Sveltr</a>!"}}),Xn=document.getElementById("tech-app"),Vn=null===Xn||"HTMLElement"!==Xn.constructor.name&&"HTMLDivElement"!==Xn.constructor.name?{}:new class extends $t{constructor(t){var e;super(),Hn.getElementById("svelte-zxgh1x-style")||((e=E("style")).id="svelte-zxgh1x-style",e.textContent=".keys.svelte-zxgh1x.svelte-zxgh1x{top:calc(100px + (100vw / 5.75));right:2px;margin:8px 10% 8px auto;position:absolute;width:256px;height:256px;padding:24px;background-color:transparent;z-index:2}.keys.svelte-zxgh1x .svelte-zxgh1x{padding:24px}",w(Hn.head,e)),vt(this,t,qn,jn,m,{title:9,color:0})}}({target:Xn,props:{title:" Hello Svelte!"}}),Jn=document.getElementById("gl-app"),Kn=null===Jn||"HTMLElement"!==Jn.constructor.name&&"HTMLDivElement"!==Jn.constructor.name?{}:new class extends $t{constructor(t){var e;super(),on.getElementById("svelte-1uh6m8g-style")||((e=E("style")).id="svelte-1uh6m8g-style",e.textContent=".controls.svelte-1uh6m8g{float:right;position:relative;margin:8px;margin-top:-160px;width:300px;height:128px;padding:1em;background-color:rgba(255,255,255,0.7);border-radius:2px;z-index:2}@media screen and (max-width: 480px){.controls.svelte-1uh6m8g{margin-top:8px}}",w(on.head,e)),vt(this,t,gn,dn,m,{title:7,color:0})}}({target:Jn,props:{title:" Hello SvelteGL!"}}),Qn=document.getElementById("viz-r"),Zn=null===Qn||"HTMLElement"!==Qn.constructor.name&&"HTMLDivElement"!==Qn.constructor.name?{}:new class extends $t{constructor(t){var e;super(),bn.getElementById("svelte-jjuo5q-style")||((e=E("style")).id="svelte-jjuo5q-style",e.textContent=".controls.svelte-jjuo5q{margin-top:-160px}",w(bn.head,e)),vt(this,t,Cn,Fn,m,{title:2,options:0,color:1},[-1,-1])}}({target:Qn,props:{title:"Visualizing R Data with Sveltr"}});return t.default=Wn,t.glApp=Kn,t.techApp=Vn,t.vizrApp=Zn,t}({});
//# sourceMappingURL=main.js.map
